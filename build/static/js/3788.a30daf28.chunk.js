"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[3788],{3788:(e,t,s)=>{s.r(t),s.d(t,{default:()=>b});var a=s(5043),r=s(5475),o=s(5700),n=s(8229),i=s(7035),l=s(6213),c=s(4117),d=s(2862),u=s(579);const p=e=>{let{refreshRight:t}=e;var o="https://backend.amourette.no/api/profile/";const[n,i]=(0,a.useState)("0"),[p,m]=(0,a.useState)("0"),[g,h]=(0,a.useState)("0"),[f,x]=(0,a.useState)("0"),[j,v]=(0,a.useState)("0"),[y,_]=(0,a.useState)("0"),[w,N]=(0,a.useState)("0"),[b,S]=(0,a.useState)([]),[k,A]=(0,a.useState)([]);(0,a.useEffect)((()=>{console.log("right",t),I(),C(),q()}),[t]),(0,a.useEffect)((()=>{I(),C(),q()}),[]);const I=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{var s=(await l.A.post(o+"gettotalGroups",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;_(s.groupsCount)}catch(a){a.response||a.request}},C=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{var s=(await l.A.post(o+"gettotalEvents",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;N(s.eventsCount)}catch(a){a.response||a.request}},q=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{var s=(await l.A.post(o+"gettotalImages",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;v(s.totalImages)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{E()}),[]);const E=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{var s=(await l.A.post(o+"getvisitprofile",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;S(s)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{const e=setInterval((async()=>{T(),I(),C(),q(),D(),$()}),1500);return()=>clearInterval(e)}),[]);const T=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{(await l.A.post(o+"gettotalOnline",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data}catch(s){s.response||s.request}};(0,a.useEffect)((()=>{$(),O()}),[]);const $=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id,looking_forr:[]};try{var s=(await l.A.post("https://backend.amourette.no/api/members/getAllMembersPageDashboard",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;if(s.length>0){const e=s.filter((e=>"Online"===e.online_user&&"Yes"===e.online_user_active)).length;i(e);const t=new Date,a=new Date(t.getTime()-2592e6);s.length;let r=0;s.forEach((e=>{new Date(e.created_at)>=a&&r++})),x(r)}m(s.length)}catch(a){a.response||a.request}},O=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{var s=(await l.A.post(o+"gettotalMembers",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;console.log(s),h(s.memberCount)}catch(a){a.response||a.request}};(0,a.useEffect)((()=>{D()}),[]);const D=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:JSON.parse(e).id};try{(await l.A.post(o+"gettotalNewMembers",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.last7Days}catch(s){s.response||s.request}},L=e=>{if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date:",e),"Invalid date";const s=new Date,a=new Date(t.getTime()-36e5),r=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Oslo",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a),o=s.getTime()-t.getTime(),n=Math.floor(o/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${r}`:1===c?`Yesterday at ${r}`:c<7?`${c}d  ${r}`:d<4?`${d}w  ${r}`:u<12?`${u}m  ${r}`:`${p}y  ${r}`},{t:M}=(0,c.Bd)();return(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";d.A.language!==e&&d.A.changeLanguage(e)}),[d.A,M]),(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"d-flex flex-column leftbar",children:[(0,u.jsxs)("div",{className:"d-flex flex-column  visitedlast",children:[(0,u.jsx)("h5",{className:"grouptitle mb-3",children:M("RightMenu_LastVisited")}),(0,u.jsx)("div",{className:"d-flex flex-column gap-3 scroll_bar visitscroll",children:0===b.length?(0,u.jsxs)("p",{children:[M("RightMenu_NovisitFound"),"."]}):b.map(((e,t)=>(0,u.jsxs)(r.N_,{to:`/friend/${e.uid}`,className:"d-flex gap-3 align-items-center listoficons",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"userpic ofit rounded-circle overflow-hidden",children:(0,u.jsx)("img",{src:e.profile_image?e.profile_image:s(7123),alt:"userpic"})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:[(0,u.jsxs)("h4",{children:[(0,u.jsx)("strong",{children:e.username})," "]}),(0,u.jsx)("h6",{children:L(e.date)})]})]},t)))})]}),(0,u.jsx)("hr",{className:"linehr"}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,u.jsx)("h5",{className:"grouptitle mb-3",children:M("RightMenu_Statistics")}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-3 listnumber",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:M("RightMenu_Onlinenow")}),(0,u.jsx)("h4",{children:n})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:M("RightMenu_Newmembers")}),(0,u.jsx)("h4",{children:f})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:M("RightMenu_Images")}),(0,u.jsx)("h4",{children:j})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:M("RightMenu_Groups")}),(0,u.jsx)("h4",{children:y})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:M("RightMenu_Eventsandparties")}),(0,u.jsx)("h4",{children:w})]}),(0,u.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,u.jsx)("h4",{children:M("RightMenu_Membersintotal")}),(0,u.jsx)("h4",{children:p})]})]})]})]})})};var m=s(4295),g=s(4241);const h=function(e){let{refresh:t}=e;var o="https://backend.amourette.no/api/members/";const[n,c]=(0,a.useState)([]),[d,p]=(0,a.useState)([]),[h,f]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=localStorage.getItem("userLogin");let t={user_id:(e?JSON.parse(e):null).id};try{const e=(await l.A.post(o+"getAllfriends",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));c(e);await x(e)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}})()}),[t,d]);const x=async e=>{const t=localStorage.getItem("userLogin"),s=t?JSON.parse(t):null;let a={user_ids:[...e,s.id].join(", "),user_id:s.id};try{var r=(await l.A.post("https://backend.amourette.no/api/notifications/getnotificationsdashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;p(r)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},j=e=>{if(!e)return null;const t=e.replace(/Z$/,""),s=g.c9.fromISO(t,{zone:"Europe/Oslo"});if(!s.isValid)return console.error("Invalid Oslo Time:",s.invalidExplanation),"Invalid Date";const a=s.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),r=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(s);const o=g.c9.now().setZone(r),n=a.toFormat("HH:mm"),i=o.diff(a,"minutes").minutes,l=o.diff(a,"hours").hours,c=o.diff(a,"days").days,d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:u<12?`${u}m ${n}`:`${p}y ${n}`},[v,y]=(0,a.useState)(!1),[_,w]=(0,a.useState)(""),[N,b]=(0,a.useState)(""),[S,k]=(0,a.useState)([]),[A,I]=(0,a.useState)(""),[C,q]=(0,a.useState)(""),[E,T]=(0,a.useState)("");var $="https://backend.amourette.no/api/members/";(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin"),t=e?JSON.parse(e):null;f(t),O()}),[]);const O=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:(e?JSON.parse(e):null).id};try{const e=await l.A.post($+"getUserDetail",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var s=e.data.row[0];b(s)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},D=async e=>{console.log(";ll"),I(e),M(e),L(e);let t={id:e,user_id:h.id};try{const e=await l.A.post($+"getGalleryDetail",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var s=e.data.row[0];R(),w(s)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},L=async e=>{let t={id:e,user_id:h.id};try{const e=await l.A.post($+"getGalleryDetailnextprevious",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&T(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&q(e.data.previous_gallery_id)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},M=async e=>{let t={id:e,user_id:h.id};try{var s=(await l.A.post(o+"getGalleryComments",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;k(s)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},R=()=>{y(!0),document.body.style.overflowY="hidden"};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"d-flex flex-column gap-4 ",children:(0,u.jsx)("div",{className:"d-flex flex-column gap-3",children:0===d.length?(0,u.jsx)("p",{}):(0,u.jsx)("div",{className:"d-flex flex-column gap-3",children:d.map(((e,t)=>{var a,o;return(0,u.jsx)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden h-100",children:(0,u.jsx)("div",{className:"d-flex justify-content-between align-items-center h-100 px-2 py-1",children:(0,u.jsx)("div",{className:"flex-grow-1",children:(0,u.jsxs)(r.N_,{to:"/previewimages"===(null===(a=e.link_href)||void 0===a?void 0:a.trim())&&e.post_id&&e.image_url?`/previewimages/${e.post_id}/${encodeURIComponent(e.image_url)}`:(null===(o=e.link_href)||void 0===o?void 0:o.trim())||"#",onClick:t=>{var s;const a=null===(s=e.link_href)||void 0===s?void 0:s.trim();"/allgallery"===a&&e.post_id&&(t.preventDefault(),D(e.post_id)),"/editprofile/viewrequest"===a&&(t.preventDefault(),window.location.href="/editprofile/viewrequest")},className:"d-flex gap-3",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden",children:(0,u.jsx)("img",{src:"Admin"===e.status?s(7123):e.recipient_profile_image||i,alt:"userpic"})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:[(0,u.jsxs)("h4",{children:["User"===e.status&&(0,u.jsxs)("strong",{children:[e.recipient_name," "]}),"Admin"===e.status&&(0,u.jsx)("strong",{children:"Admin "}),e.message]}),(0,u.jsx)("h5",{children:j(e.date)})]})]},t)})})})}))})})}),(0,u.jsx)(m.d,{isOpen1:v,onClose1:()=>{y(!1),document.body.style.overflowY="auto"},seperateGallerydetail:_,UserDetail:N,LoginData:h,getUserfav:async()=>{D(A)},GalleryCommets:S,getCommentPost:async()=>{D(A)},GalleryIdDetailGet:A,previousId:E,nextId:C,getgallerydetialnext:()=>{D(C)},getgallerydetialprev:()=>{D(E)}})]})};var f=s(686),x=s(3216),j=s(9564),v=s(2074),y=s(184),_=s(4258),w=s(793);const N=e=>{let{isOpen1:t,onClose1:o,children:n,seperateGallerydetail:i,UserDetail:p,LoginData:m,getUserfav:g,GalleryCommets:h,getCommentPost:f,GalleryIdDetailGet:x,galleryData:N,previousId:b,nextId:S,getgallerydetialnext:k,getgallerydetialprev:A,postType:I,postdetail:C,refreshdiv:q}=e;const[E,T]=(0,a.useState)(""),[$,O]=(0,a.useState)(!1),[D,L]=(0,a.useState)(!1),[M,R]=(0,a.useState)(""),J=(0,a.useRef)(null),[G,P]=(0,a.useState)(0),[F,Z]=(0,a.useState)(i),[Y,U]=(0,a.useState)(x),[W,H]=(0,a.useState)(!1),[V,B]=(0,a.useState)(h),{t:z}=(0,c.Bd)(),[K,Q]=(0,a.useState)(""),X=(0,a.useRef)(null),[ee,te]=(0,a.useState)(!1),se=localStorage.getItem("userLogin"),ae=se?JSON.parse(se):null;console.log(F),(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";d.A.language!==e&&d.A.changeLanguage(e)}),[d.A,z]),(0,a.useEffect)((()=>{B(h),Z(i),U(x),J.current&&J.current.scrollIntoView()}),[h,i,x]),(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const t=JSON.parse(e.data);let s="";"group"===I?s=String(t.post_id):"gallery"===I?s=String(t.gallery_id):"forum"===I&&(s=String(t.forum_id));const a=String(x),r=m.id;a===s&&("GalleryLike"===t.event&&Z((e=>e.id===t.gallery_id?{...e,total_favourites:t.total_favourites,user_favourited:r===t.user_id?t.user_favourited:e.user_favourited}:e)),"GalleryPost"===t.event&&B((e=>[...e,{user_id:t.user_id,username:t.username,description:t.message,profile_image:t.profile_image,makeImagePrivate:t.makeImagePrivate,date:t.date,lastInsertId:t.lastInsertId}])),"groupComments"===t.event&&B((e=>[...e,{user_id:t.post.user_id,username:t.post.comment_user_username,description:t.post.description,profile_image:t.post.comment_user_profile_image,makeImagePrivate:0,date:t.post.comment_date,lastInsertId:""}])),"ForumComments"===t.event&&B((e=>[...e,{user_id:t.user_id,username:t.username,description:t.description,profile_image:t.profile_image,makeImagePrivate:t.makeImagePrivate,date:t.date,lastInsertId:t.lastInsertId}])))}catch(t){console.error("Failed to parse WebSocket message:",t),console.error("Raw message:",e.data)}},()=>{e.close()}}),[m,x]);var re="https://backend.amourette.no/api/members/";const[oe,ne]=(0,a.useState)(""),[ie,le]=(0,a.useState)(!1),ce=e=>{if(!e)return null;const t=new Date(e);if(isNaN(t.getTime()))return console.error("Invalid date:",e),"Invalid date";const s=new Date,a=new Date(t.getTime()-36e5),r=new Intl.DateTimeFormat("en-GB",{timeZone:"Europe/Oslo",hour:"2-digit",minute:"2-digit",hour12:!1}).format(a),o=s.getTime()-t.getTime(),n=Math.floor(o/1e3),i=Math.floor(n/60),l=Math.floor(i/60),c=Math.floor(l/24),d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${r}`:1===c?`Yesterday at ${r}`:c<7?`${c}d  ${r}`:d<4?`${d}w  ${r}`:u<12?`${u}m  ${r}`:`${p}y  ${r}`};(0,a.useEffect)((()=>{const e=e=>{"ArrowRight"===e.key?k():"ArrowLeft"===e.key&&A()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[k,A]);const de=!oe.trim()||W,ue=["arse","arsehead","arsehole","ass","ass hole","asshole","bastard","bitch","bloody","bollocks","brotherfucker","bugger","bullshit","child-fucker","Christ on a bike","Christ on a cracker","cock","cocksucker","crap","cunt","dammit","damn","damned","damn it","dick","dick-head","dickhead","dumb ass","dumb-ass","dumbass","dyke","faggot","father-fucker","fatherfucker","fuck","fucker","fucking","god dammit","goddammit","God damn","god damn","goddamn","Goddamn","goddamned","goddamnit","godsdamn","holy shit","horseshit","in shit","jackarse","jack-ass","jackass","Jesus Christ","Jesus fuck","Jesus Harold Christ","Jesus H. Christ","Jesus, Mary and Joseph","Jesus wept","kike","mother fucker","mother-fucker","motherfucker","nigga","nigra","pigfucker","piss","prick","pussy","shit","shit ass","shite","sibling fucker","sisterfuck","sisterfucker","slut","son of a bitch","son of a whore","spastic","sweet Jesus","twat","wanker"],pe=async e=>{if(e.preventDefault&&e.preventDefault(),le(!0),"forum"===I){let s={description:e.description||e.target.description.value,forum_id:e.gallery_id||e.target.gallery_id.value,user_id:m.id,postType:I};try{await l.A.post(re+"forumscommentSaveDashboard",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});le(!1),ne(""),f(),J.current.scrollIntoView({behavior:"smooth"})}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}}if("group"===I){const s="https://backend.amourette.no/api/groups/";let a={comment:e.description||e.target.description.value,post_id:e.gallery_id||e.target.gallery_id.value,user_id:m.id,postType:I};try{await l.A.post(s+"CreateGroupPostCommentDashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});le(!1),ne(""),f(),J.current.scrollIntoView({behavior:"smooth"})}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}}if("gallery"===I){let s={description:e.description||e.target.description.value,gallery_id:e.gallery_id||e.target.gallery_id.value,user_id:m.id,postType:I};try{await l.A.post(re+"GalleryPostSave",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});le(!1),ne(""),f(),J.current.scrollIntoView({behavior:"smooth"})}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}}},[me,ge]=(0,a.useState)(!1),he=(0,a.useRef)(null);(0,a.useEffect)((()=>{const e=e=>{he.current&&!he.current.contains(e.target)&&ge(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[]);(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&o()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[o]);if(!t)return null;const fe=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:(e?JSON.parse(e):null).id,id:i.id,post_type:I};try{await l.A.post(re+"deletePostDashboard",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});O(!0),T("Post deleted successfully"),L(!1),q(),setTimeout((()=>{o(),O(!1)}),1e3)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}};return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&o()},children:[(0,u.jsx)(j.M,{isOpen1:D,onClose1:()=>{L(!1)},message:M,onReturnSent:async()=>{fe()}}),$&&(0,u.jsx)(w.A,{message:E}),(0,u.jsxs)("div",{className:"popup-content col-md-10",children:[(0,u.jsx)("button",{className:"close-button",style:{zIndex:"999"},onClick:o,children:"\xd7 "}),(0,u.jsxs)("div",{className:"usergallery_pop  d-flex flex-column gap-1 h-100",children:[(0,u.jsx)("button",{className:"arrow right",type:"button",onClick:k,children:(0,u.jsx)(y.X6T,{})}),(0,u.jsx)("button",{className:"arrow left",type:"button",onClick:A,children:(0,u.jsx)(y._Jj,{})}),(0,u.jsxs)("div",{className:"row p-2 p-md-4",children:[(0,u.jsx)("div",{className:"col-lg-7",children:(0,u.jsxs)("div",{className:"position-relative",children:[(0,u.jsx)("div",{className:"d-block gallery_im1g ",children:F.image&&"string"===typeof F.image?(0,u.jsx)(v.A,{className:"w-100 h-100",url:F.image}):(0,u.jsx)("p",{children:z("No_avalibale_media")})}),ae.id===F.user_id&&(0,u.jsx)("div",{className:"flex-shrink-0 posttopbtns",children:(0,u.jsx)("button",{title:"Delete",onClick:()=>{L(!0),R("Are you sure? You want to delete this post")},type:"button",className:"btn redbtn",style:{padding:"0px 0px",textAlign:"center",minWidth:"0px",background:"red",width:"40px",height:"40px",borderRadius:"50px",position:"absolute",top:"10px",right:"15px"},children:(0,u.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler textcolor icons-tabler-outline icon-tabler-trash",children:[(0,u.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,u.jsx)("path",{d:"M4 7l16 0"}),(0,u.jsx)("path",{d:"M10 11l0 6"}),(0,u.jsx)("path",{d:"M14 11l0 6"}),(0,u.jsx)("path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"}),(0,u.jsx)("path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"})]})})})]})}),(0,u.jsx)("div",{className:"col-lg-5",children:(0,u.jsxs)("div",{className:"d-flex h-100 flex-column justify-content-between gap-1",children:[(0,u.jsxs)("div",{className:"d-flex flex-column gap-1 py-3 bordr-bt",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[(0,u.jsx)(r.N_,{to:`/friend/${F.uid}`,children:F.username}),(0,u.jsx)("h6",{children:ce(F.date)})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-3 justify-content-between",children:[(0,u.jsx)("p",{children:F&&F.description&&F.description.length>150?F.description.substring(0,150)+"...":(null===F||void 0===F?void 0:F.description)||"No description available"}),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-3 flex-shrink-0",children:[(0,u.jsxs)("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[(0,u.jsx)("button",{type:"button",onClick:()=>(async(e,t)=>{let s={user_id:m.id,id:e,pertype:t};if(console.log(s),te(!0),"gallery"===t)try{await l.A.post(re+"galleryPostLike",s,{headers:{Accept:"application/json","Content-Type":"application/json"}}),te(!1),g("")}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}if("forum"===t){const t=localStorage.getItem("userLogin");let s={user_id:(t?JSON.parse(t):null).id,id:e};try{await l.A.post(re+"forumlikepostforumpage",s,{headers:{Accept:"application/json","Content-Type":"application/json"}}),g("")}catch(a){a.response?console.error("Response error:",a.response.data):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}if("group"===t){const t=localStorage.getItem("userLogin");let s={user_id:(t?JSON.parse(t):null).id,id:e};try{await l.A.post(re+"grouplikepostgrouppage",s,{headers:{Accept:"application/json","Content-Type":"application/json"}}),console.log("k"),setTimeout((()=>{g("")}),100)}catch(a){a.response?console.error("Response error:",a.response.data):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}})(F.id,F.pertype),className:"liked  fulw j",children:F.user_favourited?(0,u.jsx)(y.Mbv,{}):(0,u.jsx)(y.sOK,{})}),(0,u.jsx)("p",{className:"likecount",children:F.total_favourites})]}),(0,u.jsxs)("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[(0,u.jsx)("div",{className:"d-block like_icon",children:(0,u.jsx)("img",{className:"w-100 h-100",src:s(2100),alt:"img"})}),(0,u.jsx)("p",{className:"likecount",children:V.length})]})]})]})]}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,u.jsxs)("ul",{className:"usergallery_msg scroll_bar",children:[0===V.length?(0,u.jsx)("li",{children:z("Nocommentsavailable")}):V.map(((e,t)=>(0,u.jsxs)("li",{className:"gap-3",children:[(0,u.jsx)("div",{className:"profile_img",children:(0,u.jsx)("img",{className:"w-100 h-100",src:1===e.makeImagePrivate?s(7123):e.profile_image?e.profile_image:s(3141),alt:"img"})}),(0,u.jsxs)("div",{className:"comment_text d-flex flex-column gap-1",children:[(0,u.jsx)("h6",{children:e.username})," ",(0,u.jsx)("p",{children:e.description})," "]}),(0,u.jsx)("p",{children:ce(e.date)})," "]},t))),(0,u.jsx)("li",{ref:J})]}),(0,u.jsxs)("form",{action:"javascript:void(0)",method:"post",onSubmit:pe,children:[W&&(0,u.jsx)("span",{className:"text-danger",style:{fontSize:"14px"},children:z("Your_message_contain")}),(0,u.jsx)("div",{className:"d-flex align-items-center gap-3 w-100 usergallery_from",children:(0,u.jsxs)("div",{className:"comment_input w-100 d-flex align-items-center gap-1",children:[ie&&(0,u.jsx)("div",{className:"spinner-border text-success postloader",role:"status",children:(0,u.jsx)("span",{className:"visually-hidden"})}),(0,u.jsx)("input",{type:"hidden",value:i.id,name:"gallery_id"}),(0,u.jsxs)("div",{className:"emoji-container",children:[(0,u.jsx)("button",{type:"button",className:"emoji-button",onClick:()=>ge(!me),children:"\ud83d\ude00"}),me&&(0,u.jsx)("div",{className:"emoji-picker",ref:he,style:{position:"absolute",top:"64px"},children:(0,u.jsx)(_.Ay,{onEmojiClick:e=>{ne((t=>t+e.emoji)),ge(!1),X.current&&X.current.focus()}})})]}),(0,u.jsx)("input",{type:"text",required:!0,ref:X,name:"description",value:oe,onChange:e=>{const t=e.target.value;ne(t),""===t.trim()&&ne("");const s=ue.some((e=>t.toLowerCase().includes(e.toLowerCase())));H(s)},onKeyDown:e=>{"Enter"===e.key&&""!==oe.trim()&&(e.preventDefault(),pe({description:oe,gallery_id:i.id}))},placeholder:`${z("write_a_comment")}`}),(0,u.jsx)("button",{type:"submit",disabled:de,style:{opacity:1},className:"comment_postbtn",children:z("Post")})]})})]})]})]})})]})]})]})]})})};const b=function(){var e,t;const s=(0,a.useRef)(null),i=(0,a.useRef)(null),[d,m]=((0,x.Zp)(),(0,a.useState)("")),[y,_]=(0,a.useState)(!1),[b,S]=(0,a.useState)(""),[k,A]=(0,a.useState)(""),[I,C]=(0,a.useState)(!0),[q,E]=(0,a.useState)(!1),[T,$]=(0,a.useState)([]),[O,D]=(0,a.useState)(!1),[L,M]=(0,a.useState)([]),[R,J]=(0,a.useState)(""),[G,P]=(0,a.useState)(""),[F,Z]=(0,a.useState)(!1),[Y,U]=(0,a.useState)(""),[W,H]=(0,a.useState)(""),[V,B]=(0,a.useState)(""),[z,K]=(0,a.useState)([]),[Q,X]=(0,a.useState)(""),[ee,te]=(0,a.useState)(""),[se,ae]=(0,a.useState)(0),[re,oe]=(0,a.useState)(!0),[ne,ie]=(0,a.useState)(!1),[le,ce]=(0,a.useState)(""),[de,ue]=(0,a.useState)(""),[pe,me]=(0,a.useState)(null),[ge,he]=(0,a.useState)({index:0,type:""});var fe="https://backend.amourette.no/api/members/";const{t:xe,i18n:je}=(0,c.Bd)(),ve=localStorage.getItem("userLogin"),ye=ve?JSON.parse(ve):null;(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const t=JSON.parse(e.data),s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null;"Deletegallery"===t.event&&qe(L),"sendfriendRequest"===t.event&&t.user_id===a.id&&I(),"friendrequestacceptnotification"===t.event&&Array.isArray(t.user_id)&&t.user_id.some((e=>e.id===a.id))&&I(),"adminNotification"===t.event&&Array.isArray(t.user_id)&&t.user_id.includes(a.id)&&(console.log("New notification received for this user:",t.message),I()),"adminEventupdate"===t.event&&Array.isArray(t.user_id)&&t.user_id.includes(a.id)&&(console.log("New notification received for this user update event:",t.message),I()),"adminEventdelete"===t.event&&Array.isArray(t.user_id)&&t.user_id.includes(a.id)&&(console.log("New notification delete event:",t.message),I()),"adminEventPostdelete"===t.event&&Array.isArray(t.user_id)&&t.user_id.includes(a.id)&&(console.log("New notification delete event:",t.message),I()),"adminEventPostCommentEdit"===t.event&&Array.isArray(t.user_id)&&t.user_id.includes(a.id)&&(console.log("New notification delete event:",t.message),I()),"adminGalleryPostUpdate"===t.event&&Array.isArray(t.user_id)&&t.user_id.includes(a.id)&&(console.log("New notification delete event:",t.message),I()),"gallerynotification"===t.event&&Array.isArray(t.user_id)&&t.user_id.some((e=>e.id===a.id))&&(Ce(),C(!0),I())}catch(t){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[I]),(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";je.language!==e&&je.changeLanguage(e)}),[je,xe]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin");null===JSON.parse(e)&&(window.location.href="/login")}),[]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin"),t=e?JSON.parse(e):null;J(t),_e()}),[]);const _e=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:(e?JSON.parse(e):null).id};try{const e=await l.A.post(fe+"getUserDetail",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var s=e.data.row[0];H(s)}}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},[we,Ne]=(0,a.useState)(!1),[be,Se]=(0,a.useState)(null),ke=e=>{Se(be===e?null:e)},Ae=()=>{Se(!1)},Ie=async(e,t)=>{ue(t),P(e),E(!0),m("Are you sure? You want to delete this post")};(0,a.useEffect)((()=>{Ce()}),[]);const Ce=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:(e?JSON.parse(e):null).id};try{const e=(await l.A.post(fe+"getAllfriends",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));M(e);await qe(e)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},qe=async e=>{const t=localStorage.getItem("userLogin"),s=t?JSON.parse(t):null;let a={user_ids:[...e,s.id].join(", "),user_id:s.id,offset:0};console.log(a);try{var r=(await l.A.post(fe+"getdashboardpost",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(r),$(r)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},Ee=e=>{if(!e)return null;const t=e.replace(/Z$/,""),s=g.c9.fromISO(t,{zone:"Europe/Oslo"});if(!s.isValid)return console.error("Invalid Oslo Time:",s.invalidExplanation),"Invalid Date";const a=s.setZone(Intl.DateTimeFormat().resolvedOptions().timeZone),r=Intl.DateTimeFormat().resolvedOptions().timeZone;console.log(s);const o=g.c9.now().setZone(r),n=a.toFormat("HH:mm"),i=o.diff(a,"minutes").minutes,l=o.diff(a,"hours").hours,c=o.diff(a,"days").days,d=Math.floor(c/7),u=Math.floor(c/30),p=Math.floor(c/365);return i<60||l<24?`${n}`:1===Math.floor(c)?`Yesterday at ${n}`:c<7?`${Math.floor(c)}d ${n}`:d<4?`${d}w ${n}`:u<12?`${u}m ${n}`:`${p}y ${n}`},Te=async()=>{const e=localStorage.getItem("userLogin");let t={user_id:(e?JSON.parse(e):null).id,id:G,post_type:de};if(""!==de)try{await l.A.post(fe+"deletePostDashboard",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});_(!0),A("Post deleted successfully"),qe(L),E(!1),Se(null),setTimeout((()=>{_(!1)}),1e3)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},$e=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";B(e),Oe(e,t),he({index:s,type:t}),ce(s),ue(t);let a={id:e,user_id:R.id,post_type:t};try{const e=await l.A.post(fe+"getGalleryGroupforumDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var r=e.data.row[0];Me(),U(r),me(s),U(T[s])}}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},Oe=async(e,t)=>{const s=localStorage.getItem("userLogin");let a={id:e,user_id:(s?JSON.parse(s):null).id,post_type:t};try{var r=(await l.A.post(fe+"getGalleryCommentsDashboard",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;K(r)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},[De,Le]=(0,a.useState)(!1),Me=()=>{Le(!0),document.body.style.overflowY="hidden"};return(0,a.useEffect)((()=>{if(T.length>0&&T[pe]){const e=T[pe];console.log(de),console.log(pe),console.log(e.id),$e(e.id,de,pe)}}),[pe]),(0,a.useEffect)((()=>{const e=new IntersectionObserver((e=>{e[0].isIntersecting&&re&&!ne&&(console.log(se),(async e=>{const t=localStorage.getItem("userLogin"),s=t?JSON.parse(t):null;let a={user_ids:[...L,s.id].join(", "),user_id:s.id,offset:e};console.log("Fetching with offset:",e);try{const e=(await l.A.post(fe+"getdashboardpost",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;$((t=>{const s=new Set(t.map((e=>e.id))),a=e.filter((e=>!s.has(e.id)));return a.length>0?ae((e=>e+a.length)):oe(!1),[...t,...a]}))}catch(r){r.response?console.error("Server error:",r.response.data):r.request?console.error("No response:",r.request):console.error("Error message:",r.message)}})(se))}),{threshold:1});return i.current&&e.observe(i.current),()=>{i.current&&e.unobserve(i.current)}}),[se,re,ne]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.A,{refreshNotifications:I}),(0,u.jsx)(j.M,{isOpen1:q,onClose1:()=>{E(!1)},message:d,onReturnSent:async()=>{Te()}}),y&&(0,u.jsx)(w.A,{message:k}),(0,u.jsx)("section",{className:"dashbox d-block",children:(0,u.jsx)("div",{className:"container-lg",children:(0,u.jsxs)("div",{className:"row justify-content-between",children:[(0,u.jsx)("div",{className:"col-lg-3 col-xl-3 sidefixedbox sticky-top scroll_bar d-none d-lg-block",children:(0,u.jsx)(n.S,{})}),(0,u.jsx)("div",{className:"col-lg-5 col-xl-6",children:(0,u.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,u.jsx)("h1",{className:"grouptitle mb-1",children:xe("Friends_activity")}),0===T.length?(0,u.jsx)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden h-100 p-2",children:(0,u.jsx)("h2",{children:xe("No_activity")})}):(0,u.jsxs)("div",{className:"postblock d-flex flex-column rounded-4 overflow-hidden",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center px-2 py-1",children:[(0,u.jsx)("div",{className:"flex-grow-1",children:(0,u.jsxs)(r.N_,{to:"javascript:void(0)",className:"d-flex gap-2 align-items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden ssd",children:(0,u.jsx)(r.N_,{to:`/friend/${T[0].user_id}`,target:"_blank",children:T&&T[0]?(0,u.jsx)(v.A,{url:T[0].uimage}):(0,u.jsx)("p",{})})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:["Just now"===Ee(T[0].date)?(0,u.jsxs)(r.N_,{to:`/friend/${T[0].user_id}`,target:"_blank",children:[T[0].username," ",xe("Just_post")]}):(0,u.jsx)(r.N_,{to:`/friend/${T[0].user_id}`,target:"_blank",children:T[0].username}),(0,u.jsxs)("h5",{children:[Ee(T[0].date)," "]})]})]})}),ye.id===T[0].user_id&&(0,u.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,u.jsx)("button",{type:"button",onClick:()=>{Ne(!we)},className:"btnoption",children:(0,u.jsx)(f.aQx,{})}),we&&(0,u.jsxs)("ul",{className:"popup-menu",children:[(0,u.jsx)("li",{onClick:()=>Ie(T[0].id,T[0].pertype),children:xe("Delete")}),(0,u.jsx)("li",{onClick:()=>{Ne(!1)},children:"Cancel"})]})]})]}),(0,u.jsx)(r.N_,{onClick:()=>$e(T[0].id,T[0].pertype,0),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,u.jsx)(v.A,{className:"w-100 h-100",url:T[0].image})})]},0),(0,u.jsx)(h,{refresh:I}),(0,u.jsxs)("div",{className:"d-flex flex-column gap-3",ref:s,children:[0===T.length?(0,u.jsx)("h2",{}):T.slice(1).map(((e,t)=>{const s=Ee(e.date);return(0,u.jsxs)("div",{className:"postblock d-flex flex-column rounded-4 h-100 overflow-hidden ",children:[(0,u.jsxs)("div",{className:"d-flex justify-content-between align-items-center h-100 px-2 py-1",children:[(0,u.jsx)("div",{className:"flex-grow-1",children:(0,u.jsxs)(r.N_,{to:"javascript:void(0)",className:"d-flex gap-2 align-items-center",children:[(0,u.jsx)("div",{className:"flex-shrink-0",children:(0,u.jsx)("div",{className:"urpic ofit rounded-circle overflow-hidden",children:(0,u.jsx)(r.N_,{to:`/friend/${e.user_id}`,target:"_blank",children:(0,u.jsx)("img",{src:e.uimage,alt:"userpic"})})})}),(0,u.jsxs)("div",{className:"flex-grow-1",children:["Just now"===s?(0,u.jsxs)(r.N_,{to:`/friend/${e.user_id}`,target:"_blank",children:[e.username," ",xe("Justpostedanewphoto")]}):(0,u.jsx)(r.N_,{to:`/friend/${e.user_id}`,target:"_blank",children:e.username}),(0,u.jsx)("h5",{children:s})]})]})}),ye.id===e.user_id&&(0,u.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,u.jsx)("button",{type:"button",onClick:()=>ke(t),onTouchStart:()=>ke(t),className:"btnoption",children:(0,u.jsx)(f.aQx,{})}),be===t&&(0,u.jsxs)("ul",{className:"popup-menu",children:[(0,u.jsx)("li",{onClick:()=>Ie(e.id,e.pertype),onTouchStart:()=>Ie(e.id,e.pertype),children:xe("Delete")}),(0,u.jsx)("li",{onTouchStart:Ae,onClick:Ae,children:xe("Cancel")})]})]})]}),(0,u.jsx)(r.N_,{onTouchStart:()=>$e(e.id,e.pertype,t+1),onClick:()=>$e(e.id,e.pertype,t+1),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,u.jsx)(v.A,{className:"w-100 h-100",url:e.image})})]},t)})),(0,u.jsx)("div",{ref:i})]})]})}),(0,u.jsx)("div",{className:"col-lg-3 col-xl-3 sidefixedbox sticky-top scroll_bar d-none d-lg-block",children:(0,u.jsx)(p,{refreshRight:O})})]})})}),(0,u.jsx)(N,{isOpen1:De,onClose1:()=>{Le(!1),document.body.style.overflowY="auto"},seperateGallerydetail:Y,UserDetail:W,LoginData:R,getUserfav:async()=>{const e=localStorage.getItem("userLogin"),t=e?JSON.parse(e):null;let s={id:V,type:ge.type,user_id:t.id};console.log(s);try{const e=await l.A.post(fe+"getGallerlikedislike",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(console.log(e.data),e.data.results.length>0){var a;U(e.data.results[0]);const t=null===(a=e.data.results)||void 0===a?void 0:a[0];$((e=>e.map((e=>e.id===t.id?t:e))))}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},GalleryCommets:z,getCommentPost:async()=>{let e={id:V,type:ge.type};console.log(e,"kk");try{const s=await l.A.post(fe+"getGallerforumgroupcomment",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.data.results.length>0){var t;const e=null===(t=s.data.results)||void 0===t?void 0:t[0];$((t=>t.map((t=>t.id===e.id?e:t))))}}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},GalleryIdDetailGet:V,previousId:null===(e=T[pe-1])||void 0===e?void 0:e.id,nextId:null===(t=T[pe+1])||void 0===t?void 0:t.id,getgallerydetialnext:()=>{if(pe<T.length-1){const e=pe+1,t=T[e];$e(t.id,t.pertype,e)}},getgallerydetialprev:()=>{if(pe>0){me(pe-1);const e=pe-1,t=T[e];$e(t.id,t.pertype,e)}},postType:de,postdetail:T,refreshdiv:()=>{qe(L)}})]})}}}]);
//# sourceMappingURL=3788.a30daf28.chunk.js.map