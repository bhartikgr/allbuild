"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[9556],{6174:(e,s,t)=>{t.d(s,{A:()=>p});var a=t(5043),r=t(6213),n=t(4117),l=t(2862),o=t(5475),i=t(3538),c=t(4258),d=t(8908),m=t(793),u=t(3156),h=t(2074),g=t(579);const p=e=>{let{isOpen:s,onClose:p,children:x,userdetail:f,userChatDetail:j,LoginData:v,to_id:N,getChatAfterSave:b,refreshchat:A}=e;const k=(0,a.useRef)(null),[w,y]=(0,a.useState)(""),[_,S]=(0,a.useState)(!1),[C,E]=(0,a.useState)(""),[q,T]=(0,a.useState)(""),[O,I]=(0,a.useState)([]),[M,J]=(0,a.useState)(!1),[L,R]=(0,a.useState)(""),[F,D]=(0,a.useState)([]),[V,P]=(0,a.useState)([]),[Y,z]=(0,a.useState)(""),[W,Z]=(0,a.useState)(!1),[H,G]=(0,a.useState)(v),[B,K]=(0,a.useState)(!1),[U,X]=(0,a.useState)(""),Q="https://backend.amourette.no/api/members/",[$,ee]=(0,a.useState)(!1),[se,te]=(0,a.useState)(!1),[ae,re]=(0,a.useState)(""),[ne,le]=(0,a.useState)(!1),[oe,ie]=(0,a.useState)(!1),{t:ce}=(0,n.Bd)(),[de,me]=(0,a.useState)(null),[ue,he]=(0,a.useState)(""),[ge,pe]=(0,a.useState)([]),[xe,fe]=(0,a.useState)(j),je=(0,a.useRef)(null),ve=(0,a.useRef)(null),Ne=localStorage.getItem("userLogin"),[be,Ae]=(Ne&&JSON.parse(Ne),(0,a.useState)(!1)),[ke,we]=(0,a.useState)(0),[ye,_e]=(0,a.useState)(!0),[Se,Ce]=(0,a.useState)(!1);(0,a.useEffect)((()=>{pe(j)}),[j]),(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";l.A.language!==e&&l.A.changeLanguage(e)}),[l.A,ce]);const Ee=e=>{"Escape"===e.key&&null===de&&p()};(0,a.useEffect)((()=>(document.addEventListener("keydown",Ee),()=>{document.removeEventListener("keydown",Ee)})),[de]),(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&me(null)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[me]);const[qe,Te]=(0,a.useState)(!1),Oe=()=>{Te(!1),ss(!1)},Ie=e=>{Te(qe===e?null:e)},[Me,Je]=(0,a.useState)(!1);(0,a.useEffect)((()=>{G(v),z(N),s&&(fe(j),setTimeout((()=>{k.current&&k.current.scrollIntoView({behavior:"smooth",block:"nearest"}),ts()}),100))}),[s,j,v]),(0,a.useEffect)((()=>{const e=e=>{"Escape"===e.key&&me(null)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[me]),(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;s.id;if(s&&N){var t=Number(N);P([s.id,t])}}),[N]),(0,a.useEffect)((()=>{""!==N&&Le(),console.log(N)}),[N]);const Le=async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let t={to_id:N,user_id:s.id};try{const e=await r.A.post(Q+"getmessageCount",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("dd",e.data);var a=e.data.results;const s=localStorage.getItem("userLogin"),n=(s&&JSON.parse(s),a.filter((e=>"No"===e.read)).length);console.log(n),y(n)}catch(n){n.response?console.error("Response error:",n.response):n.request?console.error("Request error:",n.request):console.error("General error:",n.message)}};(0,a.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);if(!s)return void console.error("Received invalid JSON:",e.data);console.log(s);const t=Number(s.user_id),a=Number(s.to_id),r=Number(v.id);Number(N);"DeleteChatMessage"===s.event&&V.includes(t)&&V.includes(a)&&(Pe(s.id),A()),"DeleteChatMessage_other"===s.event&&r===t&&(Pe(s.id),A()),s.event,"DeleteChatMessageMultiple"===s.event&&V.includes(t)&&V.includes(a)&&(Ye(s.id),A()),"ChatMessage"===s.event&&V.includes(t)&&V.includes(a)&&(ze(s,t,a),r===t?setTimeout((()=>{k.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),350):console.log("This is a receiver's message:",s)),V.includes(t)&&V.includes(a)?"DeleteChatMessageMultiple"!==s.event&&"DeleteChatMessage"!==s.event&&"DeleteChatMessage_other"!==s.event&&(r===t?k.current.scrollIntoView({behavior:"smooth",block:"nearest"}):console.log("This is a receiver's message:",s)):console.log("Message ignored for this user:",r)}catch(ae){console.error("Failed to parse WebSocket message:",ae),console.error("Raw message:",e.data)}},()=>{e.close()}}),[v,N,V]);const Re=async()=>{const e=ve.current,s=e.scrollTop<=7;console.log(s);const t=e.scrollHeight-e.scrollTop<=e.clientHeight+10;if(s&&ye&&!Se){const s=e.scrollHeight;await(async e=>{Ce(!0);const s=localStorage.getItem("userLogin");let t={user_id:(s?JSON.parse(s):null).id,to_id:N,offset:e};console.log(t);try{const e=(await r.A.post(Q+"getuserChatmessage",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(e.length>0),0===e.length?_e(!1):(pe((s=>{const t=new Set(s.map((e=>e.id))),a=e.filter((e=>!t.has(e.id)));return[...s,...a]})),fe(e),we((s=>s+e.length)))}catch(ae){console.error("Error fetching messages",ae)}Ce(!1)})(ke),setTimeout((()=>{const t=e.scrollHeight;e.scrollTop=t-s}),100)}if(console.log(t),te(t),t){te(!0),ts();const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;if(""!==N){let e={user_id:s.id,to_id:N};try{"1"===(await r.A.post(Q+"messageseen",e,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.status&&Fe(N),Le()}catch(a){a.response?console.error("Error response:",a.response):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}}}},Fe=async e=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(!t||!t.id)return void console.error("Login data is not available");let a={user_id:t.id,to_id:e};try{(await r.A.post(Q+"getuserChatmessage",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results}catch(n){n.response?console.error("Error response:",n.response):n.request?console.error("Request data:",n.request):console.error("Error message:",n.message)}};(0,a.useEffect)((()=>{(async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,to_id:N};try{const e=await r.A.post(Q+"checkuserblock",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("checkblock"),console.log(e.data),e.data.result.length>0?S(!0):S(!1)}catch(t){t.response?console.error("Response error:",t.response):t.request?console.error("Request error:",t.request):console.error("General error:",t.message)}})()}),[]);!C.trim()&&F.length;const De=["arse","arsehead","arsehole","ass","ass hole","asshole","bastard","bitch","bloody","bollocks","brotherfucker","bugger","bullshit","child-fucker","Christ on a bike","Christ on a cracker","cock","cocksucker","crap","cunt","dammit","damn","damned","damn it","dick","dick-head","dickhead","dumb ass","dumb-ass","dumbass","dyke","faggot","father-fucker","fatherfucker","fuck","fucker","fucking","god dammit","goddammit","God damn","god damn","goddamn","Goddamn","goddamned","goddamnit","godsdamn","holy shit","horseshit","in shit","jackarse","jack-ass","jackass","Jesus Christ","Jesus fuck","Jesus Harold Christ","Jesus H. Christ","Jesus, Mary and Joseph","Jesus wept","kike","mother fucker","mother-fucker","motherfucker","nigga","nigra","pigfucker","piss","prick","pussy","shit","shit ass","shite","sibling fucker","sisterfuck","sisterfucker","slut","son of a bitch","son of a whore","spastic","sweet Jesus","twat","wanker"],Ve=e=>new Promise(((s,t)=>{const a=new FileReader;a.onload=function(a){const r=new Image;r.onload=function(){const a=document.createElement("canvas");a.width=r.width,a.height=r.height;a.getContext("2d").drawImage(r,0,0),a.toBlob((a=>{if(a){const t=new File([a],e.name.replace(/\.\w+$/,".png"),{type:"image/png",lastModified:(new Date).getTime()});s(t)}else t(new Error("Failed to convert image."))}),"image/png",1)},r.onerror=t,r.src=a.target.result},a.onerror=t,a.readAsDataURL(e)})),Pe=e=>{pe((s=>s.filter((s=>s.id!==e))))},Ye=e=>{pe((s=>s.filter((s=>!e.includes(s.id)))))},ze=async(e,s,t)=>{let a={data:e,user_id:s,to_id:t};console.log(a,"que");try{const e=await r.A.post(Q+"getSEndMessagequick",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});var n=e.data.results;console.log(n,"check");const s=localStorage.getItem("userLogin");if(t===(s?JSON.parse(s):null).id&&n.length>0){const e=n.filter((e=>"No"===e.read)).length;console.log(e),Le()}e.data&&Array.isArray(e.data.results)?(pe((s=>[...s,...e.data.results])),fe(e.data.results)):console.error("No valid results found in the response:",e.data)}catch(l){l.response?console.error("Response error:",l.response):l.request?console.error("Request error:",l.request):console.error("General error:",l.message)}},We=e=>{if(!e)return null;const s=new Date(e);if(isNaN(s))return"Invalid Date";const t=new Date(s.getTime()-36e5);return new Intl.DateTimeFormat("en-US",{timeZone:"Europe/Oslo",day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}).format(t)},Ze=async e=>{let s={id:e,user_id:v.id,to_id:N};try{await r.A.post(Q+"deletemessagechat",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});Te(!1)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},[He,Ge]=(0,a.useState)([]),[Be,Ke]=(0,a.useState)(!1),[Ue,Xe]=(0,a.useState)(!1),Qe=e=>{Ge((s=>s.includes(e)?s.filter((s=>s!==e)):[...s,e]))},$e=e=>[".png",".jpg",".jpeg",".gif"].some((s=>e.endsWith(s)))?e:null;(0,a.useEffect)((()=>{O.length>0||He.length>0?Ke(!0):Ke(!1)}),[O,He]);const[es,ss]=(0,a.useState)(!1),ts=async()=>{if(console.log(N),!N||se)return;const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,to_id:N};console.log(s);try{await r.A.post(Q+"messageseenall",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("Seen API response received"),setTimeout((()=>{k.current&&k.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),350),Le()}catch(t){t.response?console.error("Error response:",t.response):t.request?console.error("Request data:",t.request):console.error("Error message:",t.message)}};(0,a.useEffect)((()=>{if(!s)return;const e=ve.current;if(!e)return;const t=()=>Re();return e.addEventListener("scroll",t),()=>{e.removeEventListener("scroll",t)}}),[s,se,ke,ye,Se]);return s?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"popup-overlay checkbox",onClick:e=>{e.target.classList.contains("popup-overlay")&&p()},children:[M&&(0,g.jsx)(d.A,{message:L}),B&&(0,g.jsx)(m.A,{message:U}),(0,g.jsx)("div",{className:"popup-content col-md-4",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-0 chat_box",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center gap-3 mess_head ",children:[(0,g.jsx)(o.N_,{target:"_blank",to:`/friend/${f.id}`,className:"d-block chat_profile",children:f.profile_image&&0===f.makeImagePrivate?(0,g.jsx)("img",{className:"w-100 h-100",src:f.profile_image,alt:"userpic"}):(0,g.jsx)("img",{className:"w-100 h-100",src:t(7123),alt:"userpic"})}),(0,g.jsxs)("div",{className:"d-flex flex-md-row flex-column align-items-md-center justify-content-between w-100 gap-2 chat_name pt-3",children:[(0,g.jsx)("div",{className:"d-flex flex-column gap-3",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,g.jsxs)("div",{className:"d-flex align-items-md-center gap-2",children:[(0,g.jsx)("div",{className:"newclass",children:(0,g.jsx)(o.N_,{target:"_blank",className:"unamecolor",to:`/friend/${f.id}`,children:f.username})}),",",(0,g.jsx)("h3",{children:null!=f.birthday_date?`${(e=>{const s=new Date(e),t=new Date;let a=t.getFullYear()-s.getFullYear();const r=t.getMonth()-s.getMonth();return(r<0||0===r&&t.getDate()<s.getDate())&&a--,a})(f.birthday_date)}`:""})]}),(0,g.jsx)("h5",{children:f.location})]})}),(0,g.jsxs)("div",{className:"d-flex flex-column justify-content-end align-items-end gap-2",children:[(0,g.jsxs)("div",{className:"search-box",children:[(0,g.jsx)("i",{className:"fas fa-search"}),(0,g.jsx)("input",{type:"search",placeholder:ce("searchaaa"),onInput:e=>(e=>{const s=e.target.value.toLowerCase();if(he(s),!s)return void pe(j);const t=j.filter((e=>e&&e.message&&e.message.toLowerCase().includes(s)));pe(t)})(e)})]}),(0,g.jsxs)("div",{className:"d-flex align-items-center gap-2 message_s-btn",children:[Be&&(0,g.jsx)("button",{className:"deltebtn",type:"button",onClick:async()=>{let e={id:He,user_id:v.id,to_id:N,other_id:O};try{await r.A.post(Q+"deletemultiplemessagechat",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});Ge([]),Ke(!1),Xe(!1),I([]),Ke(!1)}catch(s){s.response||(s.request?console.error("Request data:",s.request):console.error("Error message:",s.message))}},children:ce("delete")}),(0,g.jsx)("button",{className:"select_btn "+(Ue?"active":""),type:"button",onClick:()=>{Xe(!Ue)},children:ce("Select")})]})]})]})]}),(0,g.jsxs)("div",{className:"mess_box_main",ref:ve,style:{maxHeight:"56vh",overflow:"auto",display:"flex",flexWrap:"wrap",justifyContent:"end"},children:[(0,g.jsxs)("div",{className:"mess_box d-flex flex-column gap-3 justify-content-end w-100",children:[Se&&(0,g.jsx)("div",{className:"text-center w-100 py-2",children:(0,g.jsx)("span",{className:"spinner-border text-success spinner-border-sm",role:"status","aria-hidden":"true"})}),0===ge.length?(0,g.jsx)("div",{className:"empty-chat-message",children:(0,g.jsx)("p",{children:ce("No_messages_to_display")})}):ge.map(((e,s)=>(0,g.jsx)("div",{ref:s===ge.length-1?k:null,children:e.user_id===v.id?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"main_mess right_mess d-flex align-items-end gap-2 flex-column",children:Array.isArray(JSON.parse(e.file))&&JSON.parse(e.file).length>0&&(0,g.jsxs)(g.Fragment,{children:[0===s&&(0,g.jsx)(o.N_,{target:"_blank",to:`/friend/${e.user1_id}`,className:"d-block mess_profile",children:(0,g.jsx)("img",{className:"w-100 h-100 pr",src:1===e.user1_makeImagePrivate?t(7123):e.user1_profile,alt:"profile"})}),JSON.parse(e.file).map(((a,r)=>{const n=$e(a);return(0,g.jsx)("div",{className:"message d-block send_image",children:n?(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"d-flex align-items-start gap-1 h-100",children:[(0,g.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,g.jsx)("button",{className:"remove_mess",onClick:()=>Ie(s),children:(0,g.jsx)(i.Kak,{})}),qe===s&&(0,g.jsxs)("ul",{className:"popup-menu",children:[(0,g.jsx)("li",{onClick:()=>Ze(e.id),children:ce("Remove")}),(0,g.jsx)("li",{onClick:Oe,children:ce("Cancel")})]})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-1 justify-content-end align-items-end",children:[(0,g.jsxs)("div",{className:"d-flex align-items-start gap-1",children:[(0,g.jsx)("img",{className:"w-100 h-100 d",src:n,alt:`file-${r}`,onClick:()=>me(n),style:{cursor:"pointer"}}),Ue&&(0,g.jsx)("input",{type:"checkbox",checked:He.includes(e.id),onChange:()=>Qe(e.id)})]}),(0,g.jsx)("span",{children:We(e.date)})]})]})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)("div",{className:"d-flex align-items-start gap-1 h-100",children:[(0,g.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,g.jsx)("button",{className:"remove_mess",onClick:()=>Ie(s),children:(0,g.jsx)(i.Kak,{})}),qe===s&&(0,g.jsxs)("ul",{className:"popup-menu",children:[(0,g.jsx)("li",{onClick:()=>Ze(e.id),children:ce("Remove")}),(0,g.jsx)("li",{onClick:Oe,children:ce("Cancel")})]})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-1 justify-content-end align-items-end",children:[(0,g.jsxs)("div",{className:"d-flex align-items-start gap-1",children:[(0,g.jsx)(o.N_,{to:a,download:!0,target:"_blank",rel:"noopener noreferrer",className:"h-100",children:(0,g.jsx)("img",{src:t(3541),alt:"File"})}),Ue&&(0,g.jsx)("input",{type:"checkbox",checked:He.includes(e.id),onChange:()=>Qe(e.id)})]}),(0,g.jsx)("span",{children:We(e.date)})]})]})})},r)}))]})}),e.message&&"null"!==e.message&&(0,g.jsxs)("div",{className:"main_mess right_mess d-flex align-items-center gap-2",children:[(0,g.jsx)(o.N_,{target:"_blank",to:`/friend/${e.user1_id}`,className:"d-block mess_profile ri",children:(0,g.jsx)("img",{className:"w-100 h-100 ri",src:1===e.user1_makeImagePrivate?t(7123):e.user1_profile,alt:"profile"})}),(0,g.jsxs)("div",{className:" d-flex flex-column gap-1 justify-content-end align-items-end",children:[(0,g.jsxs)("div",{className:"d-flex align-items-start gap-0",children:[(0,g.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,g.jsx)("button",{className:"remove_mess",onClick:()=>Ie(s),children:(0,g.jsx)(i.Kak,{})}),qe===s&&(0,g.jsxs)("ul",{className:"popup-menu",children:[(0,g.jsx)("li",{onClick:()=>Ze(e.id),children:ce("Remove")}),(0,g.jsx)("li",{onClick:Oe,children:ce("Cancel")})]})]}),(0,g.jsxs)("div",{className:"d-flex align-items-start gap-1",children:[(0,g.jsx)("p",{className:"message",children:e.message}),Ue&&(0,g.jsx)("input",{type:"checkbox",checked:He.includes(e.id),onChange:()=>Qe(e.id)})]})]}),(0,g.jsx)("span",{children:We(e.date)})]})]})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:"main_mess left_mess d-flex align-items-start gap-2 flex-column ",children:Array.isArray(JSON.parse(e.file))&&JSON.parse(e.file).length>0&&(0,g.jsxs)(g.Fragment,{children:[0===s&&(0,g.jsx)(o.N_,{target:"_blank",to:`/friend/${e.user1_id}`,className:"d-block mess_profile le flex-shrink-0",children:(0,g.jsx)("img",{className:"w-100 h-100 d",src:1===e.user1_makeImagePrivate?t(7123):e.user1_profile,alt:"profile"})}),JSON.parse(e.file).map(((s,a)=>{const r=$e(s);return(0,g.jsx)("div",{className:"message d-block send_image",children:r?(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"d-flex align-items-start gap-1 h-100",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-1 justify-content-end align-items-end",children:[(0,g.jsx)("div",{className:"d-flex align-items-start gap-1",children:(0,g.jsx)("img",{className:"w-100 h-100 d",src:r,alt:`file-${a}`,onClick:()=>me(r),style:{cursor:"pointer"}})}),(0,g.jsx)("span",{children:We(e.date)})]})})}):(0,g.jsx)(g.Fragment,{children:(0,g.jsx)("div",{className:"d-flex align-items-start gap-1 h-100",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-1 justify-content-end align-items-end",children:[(0,g.jsx)("div",{className:"d-flex align-items-start gap-1",children:(0,g.jsx)(o.N_,{to:s,download:!0,target:"_blank",rel:"noopener noreferrer",className:"h-100",children:(0,g.jsx)("img",{src:t(3541),alt:"File"})})}),(0,g.jsx)("span",{children:We(e.date)})]})})})},a)}))]})}),e.message&&"null"!==e.message&&(0,g.jsxs)("div",{className:"main_mess left_mess d-flex align-items-center gap-2",children:[(0,g.jsx)(o.N_,{target:"_blank",to:`/friend/${e.user1_id}`,className:"d-block mess_profile le  flex-shrink-0",children:(0,g.jsx)("img",{className:"w-100 h-100 pr",src:1===e.user1_makeImagePrivate?t(7123):e.user1_profile,alt:"profile"})}),(0,g.jsxs)("div",{className:" d-flex flex-column gap-1 justify-content-start align-items-start",children:[(0,g.jsx)("div",{className:"d-flex align-items-start gap-0",children:(0,g.jsx)("div",{className:"d-flex align-items-start gap-1",children:(0,g.jsx)("p",{className:"message",children:e.message})})}),(0,g.jsx)("span",{children:We(e.date)})]})]})]})},s)))]}),ge.length>4&&!se&&(0,g.jsxs)("button",{className:"newmessagearrow",type:"button",onClick:async()=>{if(console.log(N),!N)return;const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,to_id:N};console.log(s);try{await r.A.post(Q+"messageseenall",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("ll"),setTimeout((()=>{k.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((()=>{te(!0)}),350)}),30),Le()}catch(t){t.response?console.error("Error response:",t.response):t.request?console.error("Request data:",t.request):console.error("Error message:",t.message)}},children:[(0,g.jsx)(u.BNo,{}),w>0&&(0,g.jsx)("span",{children:w})]})]}),de&&(0,g.jsx)("div",{className:"p-5",style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:989898},onClick:()=>me(null),children:(0,g.jsxs)("div",{className:"rel d-block h-100",children:[(0,g.jsx)("button",{type:"button",className:"closebtnpic",children:(0,g.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",className:"icon icon-tabler icons-tabler-outline icon-tabler-x",children:[(0,g.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,g.jsx)("path",{d:"M18 6l-12 12"}),(0,g.jsx)("path",{d:"M6 6l12 12"})]})}),(0,g.jsx)(h.A,{className:"w-100 h-100 object-fit-cover",url:de,style:{maxWidth:"100%",maxHeight:"100%",borderRadius:"10px",height:"85vh",objectFit:"contain"}})]})}),(0,g.jsx)("span",{className:"text-danger",children:ae}),oe&&(0,g.jsx)("span",{className:"text-danger",children:ce("Your_message_contain")}),(0,g.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(""!==C.trim()||F.length>0)&&(async()=>{if(Te(!1),!0===_)J(!0),R("User is blocked"),setTimeout((()=>{J(!1),R("")}),1e3);else{te(!0);const a=new FormData;le(!0);var e=null===C||void 0===C?void 0:C.trim();if(console.log(e),""!==e){const n=(s=e).trim()?s.split(/\s+/).length:0;if(n<2e3){a.append("message",C),a.append("fileType","chats"),a.append("user_id",v.id),a.append("to_id",N),F.forEach((e=>{a.append("files",e)})),console.log("Message:",C),console.log("Files:",F);try{const e=await r.A.post(Q+"saveUserChat",a,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});le(!1),e.data,k.current&&k.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((()=>{k.current&&k.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((()=>{te(!0)}),50)}),500)}catch(t){t.response?console.error("Response error:",t.response):t.request?console.error("Request error:",t.request):console.error("General error:",t.message)}E(""),D([])}else le(!1),J(!0),R(`Comment cannot exceed 2000 words. Currently: ${n} words.`),setTimeout((()=>{J(!1),R("")}),1e3)}else{a.append("message",C),a.append("fileType","chats"),a.append("user_id",v.id),a.append("to_id",N),F.forEach((e=>{a.append("files",e)})),console.log("Message:",C),console.log("Files:",F);try{const e=await r.A.post(Q+"saveUserChat",a,{headers:{Accept:"application/json","Content-Type":"multipart/form-data"}});le(!1),e.data,k.current&&k.current.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((()=>{k.current&&k.current.scrollIntoView({behavior:"smooth",block:"nearest"})}),500)}catch(t){t.response?console.error("Response error:",t.response):t.request?console.error("Request error:",t.request):console.error("General error:",t.message)}E(""),D([])}}var s})()},className:"message_type d-flex align-items-center gap-2",children:[(0,g.jsxs)("div",{className:"d-block image_img",children:[(0,g.jsx)("input",{type:"file",onChange:async e=>{const s=Array.from(e.target.files),t=[],a=[];for(const n of s){const e=n.type.startsWith("image/"),s=n.type.startsWith("video/");if(e||s)if(n.size/1024/1024>25)a.push(`${n.name} exceeds 25 MB.`);else{if(e){if(!["image/jpeg","image/png","image/gif"].includes(n.type))try{const e=await Ve(n);t.push(e);continue}catch(r){console.error("Image conversion error:",r),a.push(`Failed to convert ${n.name}`);continue}}t.push(n)}else a.push(`${n.name} is not a valid image or video.`)}if(a.length>0?re(`Some files were not added:\n${a.join("\n")}`):re(""),Ae(!0),Z(!0),D((e=>[...e,...t])),je.current){je.current.focus();const e=new KeyboardEvent("keydown",{key:"Enter",code:"Enter",keyCode:13,bubbles:!0});je.current.dispatchEvent(e)}},multiple:!0}),(0,g.jsx)("img",{className:"w-100 h-100",src:t(3355),alt:"Upload"})]}),(0,g.jsxs)("div",{className:"emoji-container emchatbox",children:[(0,g.jsx)("button",{type:"button",className:"emoji-button",onClick:()=>Je(!Me),children:"\ud83d\ude00"}),Me&&(0,g.jsx)(c.Ay,{onEmojiClick:e=>{E((s=>s+e.emoji)),je.current&&je.current.focus(),Ae(!0),Je(!1)}})]}),(0,g.jsx)("input",{type:"text",ref:je,value:C,onChange:e=>{const s=e.target.value;E(s),""!==s.trim()?Z(!0):Z(!1);const t=De.some((e=>s.toLowerCase().includes(e.toLowerCase())));Ae(!0),ie(!!t)},placeholder:"Write a message..."}),(0,g.jsx)("button",{className:"d-block image_img",type:"submit",disabled:!C.trim()&&0===F.length,children:(0,g.jsx)("img",{className:"w-50 h-50",src:t(1145),alt:"Send"})}),ne&&(0,g.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,g.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),F.length>0&&(0,g.jsx)("div",{className:"muti_images",children:(0,g.jsx)("div",{className:"muti_main overflow-auto d-flex gap-2 mx-auto w-96",children:F.map(((e,s)=>(0,g.jsxs)("div",{className:"d-block muti_image",children:[(0,g.jsx)("img",{className:"w-100 h-100",src:URL.createObjectURL(e),alt:"Preview"}),(0,g.jsx)("button",{className:"delete_img",onClick:()=>(e=>{D((s=>s.filter(((s,t)=>t!==e))))})(s),children:"\xd7"})]},s)))})})]})]})})]})}):null}},6990:(e,s,t)=>{t.d(s,{w:()=>c});var a=t(5043),r=t(5475),n=t(4117),l=t(2862),o=t(4572),i=t(579);const c=()=>{const{t:e}=(0,n.Bd)(),[s,t]=(0,a.useState)(!1);(0,a.useEffect)((()=>{const e=localStorage.getItem("language")||"en";l.A.language!==e&&l.A.changeLanguage(e)}),[l.A,e]);const c=(new Date).getFullYear();return(0,a.useEffect)((()=>{const e=localStorage.getItem("userLogin");null!==JSON.parse(e)&&t(!0)}),[]),(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("footer",{className:"d-block",children:(0,i.jsx)("div",{className:"ftblocks py-5",children:(0,i.jsxs)("div",{className:"container-lg",children:[(0,i.jsxs)("div",{className:"row gy-4",children:[(0,i.jsx)("div",{className:"col-md-6",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-3 ftlogoblock",children:[(0,i.jsx)("h4",{children:e("WELCOMETOAMOURETTE")}),(0,i.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,i.jsx)("h6",{children:e("Yourenow")}),(0,i.jsx)(r.N_,{to:"/helpsupport",className:"needsign",children:(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:e("Needhelp")}})})]})]})}),(0,i.jsx)("div",{className:"col-md-3",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-3 ftblock ps-md-5",children:[(0,i.jsx)("h3",{children:e("About")}),(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 ftlink",children:[(0,i.jsx)(r.N_,{to:"/setting",children:e("Membership")}),(0,i.jsx)(r.N_,{to:"/helpsupport",children:e("Help_and_support")}),(0,i.jsx)(r.N_,{to:"/setting",children:e("Contact_us")})]})]})}),(0,i.jsx)("div",{className:"col-md-3",children:(0,i.jsxs)("div",{className:"d-flex flex-column gap-3 ftblock ps-md-5",children:[(0,i.jsx)("h3",{children:e("Resources")}),(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 ftlink",children:[(0,i.jsx)(r.N_,{to:"/securitypage",children:e("Security")}),(0,i.jsx)(r.N_,{to:"/setting",children:e("privacy")}),(0,i.jsx)(r.N_,{to:"/helpsupport",children:e("Terms_and_conditions")})]})]})}),(0,i.jsx)("div",{className:"col-12",children:(0,i.jsx)("div",{className:"d-block ftlogoblock",children:(0,i.jsxs)("p",{className:"copyrighttext",children:["\xa9 ",e("Copyright_2024_all_rights_reserved")," ",c,", ",e("all_rights_reserved")]})})})]}),(0,i.jsx)(o.A,{})]})})})})}},3541:e=>{e.exports="data:image/png;base64,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"},1404:(e,s,t)=>{e.exports=t.p+"static/media/male.ca9f1a8361af6a3bfcbf.png"},1145:(e,s,t)=>{e.exports=t.p+"static/media/send.70b861efdc3139bb3a36.png"},3355:(e,s,t)=>{e.exports=t.p+"static/media/serach2.9f9d40152f2832cac4bd.png"},7293:(e,s,t)=>{e.exports=t.p+"static/media/woman.a148b1417ba2399fcf18.png"}}]);
//# sourceMappingURL=9556.e9872573.chunk.js.map