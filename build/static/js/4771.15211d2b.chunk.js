"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[4771],{2948:(e,s,a)=>{a.d(s,{I:()=>u});var t=a(5043),r=a(1462),o=a(6213),n=a(793),l=a(8908),c=a(4117),i=a(2862),d=a(579);const u=e=>{let{isOpen:s,onClose:a,children:u,LoginData:p}=e;const[m,g]=(0,t.useState)(""),[h,x]=(0,t.useState)(""),[j,f]=(0,t.useState)(null),[v,N]=(0,t.useState)(!1),[y,b]=(0,t.useState)(""),[_,w]=(0,t.useState)(null),[k,S]=(0,t.useState)(!1),[A,C]=(0,t.useState)(!1),[R,q]=(0,t.useState)(!1),[L,I]=(0,t.useState)(""),[E,M]=(0,t.useState)(""),[J,O]=(0,t.useState)(""),[F,G]=(0,t.useState)(""),[T,D]=(0,t.useState)(""),{t:U}=(0,c.Bd)();if((0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),i.A.language!==e&&i.A.changeLanguage(e)}),[i.A,U]),!s)return null;const $=e=>new Promise(((s,a)=>{const t=new FileReader;t.onload=t=>{const r=new Image;r.onload=()=>{const t=document.createElement("canvas");t.width=r.width,t.height=r.height;t.getContext("2d").drawImage(r,0,0),t.toBlob((t=>{if(t){const a=new File([t],e.name.replace(/\.\w+$/,".png"),{type:"image/png",lastModified:Date.now()});s(a)}else a(new Error("Canvas conversion failed"))}),"image/png",1)},r.onerror=a,r.src=t.target.result},t.onerror=a,t.readAsDataURL(e)})),P=["arse","arsehead","arsehole","ass","ass hole","asshole","bastard","bitch","bloody","bollocks","brotherfucker","bugger","bullshit","child-fucker","Christ on a bike","Christ on a cracker","cock","cocksucker","crap","cunt","dammit","damn","damned","damn it","dick","dick-head","dickhead","dumb ass","dumb-ass","dumbass","dyke","faggot","father-fucker","fatherfucker","fuck","fucker","fucking","god dammit","goddammit","God damn","god damn","goddamn","Goddamn","goddamned","goddamnit","godsdamn","holy shit","horseshit","in shit","jackarse","jack-ass","jackass","Jesus Christ","Jesus fuck","Jesus Harold Christ","Jesus H. Christ","Jesus, Mary and Joseph","Jesus wept","kike","mother fucker","mother-fucker","motherfucker","nigga","nigra","pigfucker","piss","prick","pussy","shit","shit ass","shite","sibling fucker","sisterfuck","sisterfucker","slut","son of a bitch","son of a whore","spastic","sweet Jesus","twat","wanker"];return(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{className:"popup-overlay",onClick:e=>{e.target.classList.contains("popup-overlay")&&a()},children:[A&&(0,d.jsx)(n.A,{message:L}),R&&(0,d.jsx)(l.A,{message:E}),(0,d.jsxs)("div",{className:"popup-content col-md-4",children:[(0,d.jsx)("button",{className:"close-button",onClick:a,children:"\xd7 "}),(0,d.jsxs)("div",{className:"cneventup  d-flex flex-column gap-4",children:[(0,d.jsx)("h3",{children:U("Create_new_group")}),(0,d.jsx)("form",{onSubmit:async e=>{e.preventDefault(),S(!0);try{const e=new FormData;e.append("name",m),e.append("description",h),e.append("image",_),e.append("user_id",p.id),e.append("fileType","groups"),e.append("makeImageUse",v);const s=await o.A.post("https://backend.amourette.no/api/groups/groupsave",e,{headers:{"Content-Type":"multipart/form-data"}});S(!1),C(!0),I(s.data.message),setTimeout((()=>{q(!1),C(!1),window.location.reload(),a()}),800),f(null),g(""),x(""),N(!1),w(null)}catch(s){S(!1),q(!0),setTimeout((()=>{q(!1),a()}),800),M("Error creating esssvent:",s)}},action:"javascript:void(0)",method:"post",children:(0,d.jsxs)("div",{className:"row gy-4",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsxs)("div",{className:"uploadfile rel bgload",children:[(0,d.jsx)("input",{type:"file",required:!0,accept:"image/*,video/mp4,video/webm,video/ogg",name:"image",onChange:async e=>{const s=e.target.files[0];if(s){const e=s.type.startsWith("image/"),t=s.type.startsWith("video/");if(!e&&!t)return b("Please upload a valid image or video file."),void w(null);let r=s;if(e&&!["image/jpeg","image/png","image/gif"].includes(s.type))try{r=await $(s)}catch(a){return b("Failed to convert image to PNG."),void w(null)}if(r.size>26214400)return b("File size must be less than 5 MB."),void w(null);b(""),w(r),O(e?"image":"video")}},className:"fileload"}),(0,d.jsxs)("div",{className:"upload_image",children:["image"===J&&_&&(0,d.jsx)("img",{className:"w-100 h-100",src:URL.createObjectURL(_),alt:"Selected Image"}),"video"===J&&_&&(0,d.jsxs)("video",{className:"w-100 h-100",controls:!0,children:[(0,d.jsx)("source",{src:F||URL.createObjectURL(_),type:"video/mp4"}),U("Your_browser_does")]})]}),(0,d.jsx)("div",{className:"inload",style:{height:"100px"},children:(0,d.jsxs)("div",{children:[(0,d.jsx)(r.Kh2,{style:{fontSize:"24px"}}),(0,d.jsxs)("h3",{style:{fontSize:"14px"},children:[U("UPLOADIMAGE_Video")," *"]})]})}),y&&(0,d.jsx)("p",{className:"text-danger",children:y})]})}),(0,d.jsx)("div",{className:"col-12",children:(0,d.jsx)("input",{type:"text",placeholder:`${U("Group_name")} *`,name:"name",required:!0,value:m,onChange:e=>{const s=e.target.value;g(s);const a=P.some((e=>s.toLowerCase().includes(e.toLowerCase())));D(!!a)}})}),(0,d.jsx)("div",{className:"col-12",children:(0,d.jsx)("textarea",{rows:"5",placeholder:`${U("Group_description")} *`,name:"description",value:h,onChange:e=>{const s=e.target.value;x(s);const a=P.some((e=>s.toLowerCase().includes(e.toLowerCase())));D(!!a)}})}),T&&(0,d.jsx)("span",{className:"text-danger",style:{fontSize:"14px"},children:U("Your_message_contain")}),(0,d.jsx)("div",{className:"col-12",children:(0,d.jsx)("div",{className:"listbox",children:(0,d.jsxs)("label",{className:"cbox",children:[U("Make_private"),(0,d.jsx)("input",{type:"checkbox",checked:v,onChange:e=>N(e.target.checked),name:"makeImagePrivate"}),(0,d.jsx)("span",{className:"checkmark"})]})})}),(0,d.jsxs)("div",{className:"col-12",children:[k&&(0,d.jsx)("div",{className:"spinner-border text-success",role:"status",children:(0,d.jsxs)("span",{className:"visually-hidden",children:[U("Loading"),"..."]})}),(0,d.jsx)("button",{type:"submit",children:U("Create_new_group")})]})]})})]})]})]})})}},4771:(e,s,a)=>{a.r(s),a.d(s,{default:()=>y});var t=a(5043),r=a(3216),o=a(5475),n=a(5328),l=a(787),c=a(184),i=a(3625),d=a(5442),u=a(6571),p=a(423),m=a(2425),g=a(5700),h=a(2948),x=a(2074),j=a(6213),f=a(4117),v=a(2862),N=a(579);const y=function(){const[e,s]=(0,t.useState)("Invite"),a=(0,r.Zp)(),[y,b]=(0,t.useState)(""),[_,w]=(0,t.useState)([]),[k,S]=(0,t.useState)([]),[A,C]=(0,t.useState)(""),[R,q]=(0,t.useState)(""),[L,I]=(0,t.useState)([]),[E,M]=(0,t.useState)(0);var J="https://backend.amourette.no/api/groups/";const[O,F]=(0,t.useState)(!1),[G,T]=(0,t.useState)(!0),D=(0,t.useRef)(G);(0,t.useEffect)((()=>{D.current=G}),[G]),(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=JSON.parse(e);null==s?a("/groups"):C(s)}),[]),(0,t.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);if(console.log(s,"ggg"),!s)return void console.error("Received invalid JSON:",e.data);"eventcreate"===s.event&&(""!==y?$(G):B(k,G))}catch(s){console.error("Failed to parse WebSocket message:",s),console.error("Raw message:",e.data)}},()=>{e.close()}}),[]),(0,t.useEffect)((()=>{console.log(G),2===E?U():$(G)}),[G,y,E]);const U=async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let a={user_ids:[...k,s.id],orderBy:G,user_id:s.id};try{const e=await j.A.post(J+"getgroupdiscover",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log("Response data:",e.data.results)}catch(t){t.response?(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)):t.request?console.error("Request data:",t.request):console.error("Error message:",t.message)}},$=async e=>{const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null,t=[...k,a.id];let r={search:y,user_id:t,orderby:e};console.log(r);try{const e=await j.A.post(J+"getAllgroupsearch",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});w(e.data.results),Y()}catch(o){o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("Request data:",o.request):console.error("Error message:",o.message)}};(0,t.useEffect)((()=>{Y()}),[]),(0,t.useEffect)((()=>{const e=localStorage.getItem("userLogin");e&&JSON.parse(e);P()}),[]);const P=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=(await j.A.post("https://backend.amourette.no/api/members/getAllfriends",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));console.log(e),console.log("fg"),S(e);await B(e,G)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}},B=async(e,s)=>{const a=localStorage.getItem("userLogin");let t={user_id:[...e,(a?JSON.parse(a):null).id],orderby:s};try{const e=await j.A.post(J+"getAllgroup",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});w(e.data.results),console.log("Response data:",e.data.results)}catch(r){r.response?(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)):r.request?console.error("Request data:",r.request):console.error("Error message:",r.message)}},z=async e=>{console.log(k);const s=localStorage.getItem("userLogin"),a=JSON.parse(s);if(M(e),2===e){let e={user_ids:[...k,a.id],user_id:a.id};try{const s=await j.A.post(J+"getgroupdiscover",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});w(s.data.results),console.log("Response data:",s.data.results)}catch(t){t.response?(console.error("Response data:",t.response.data),console.error("Response status:",t.response.status)):t.request?console.error("Request data:",t.request):console.error("Error message:",t.message)}}else P()};(0,t.useEffect)((()=>{const e=setInterval((async()=>{Y()}),1500);return()=>clearInterval(e)}),[k]);const Y=async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null,a=[...k,s.id];let t={search:y,user_id:a,orderby:D.current};try{var r=(await j.A.post(J+"getmostpopularGroups",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;q(r)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}};(0,t.useEffect)((()=>{W()}),[]);const W=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{var a=(await j.A.post(J+"getinviteUserGroup",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.result;I(a)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}};function H(e){const s=new Date(e);return new Intl.DateTimeFormat("en-GB",{day:"2-digit",month:"short",year:"numeric"}).format(s)}const{t:K}=(0,f.Bd)();(0,t.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),v.A.language!==e&&v.A.changeLanguage(e),console.log(K("LeftMenu_yourprofile"))}),[v.A,K]);const[V,Z]=(0,t.useState)(!1);return(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(g.A,{}),(0,N.jsx)("section",{className:"alleventsbox d-block gapy",children:(0,N.jsx)("div",{className:"container-lg",children:(0,N.jsxs)("div",{className:"row gy-4",children:[(0,N.jsx)("div",{className:"col-md-3 sticky-md-top h-100  evleft",children:(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 searchleftfilter scroll_bar pe-2 ",children:[(0,N.jsx)("h1",{children:K("RightMenu_Groups")}),(0,N.jsx)("div",{className:"filtersearch",children:(0,N.jsx)("form",{action:"",children:(0,N.jsx)("input",{type:"text",value:y,onInput:e=>(async e=>{b(e);const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null;let t={search:e,user_id:[...k,a.id],orderby:G};try{const e=await j.A.post(J+"getAllgroupsearch",t,{headers:{Accept:"application/json","Content-Type":"application/json"}});w(e.data.results)}catch(r){r.response?(console.error("Response data:",r.response.data),console.error("Response status:",r.response.status)):r.request?console.error("Request data:",r.request):console.error("Error message:",r.message)}})(e.target.value),placeholder:K("Search_Group")})})}),(0,N.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,N.jsxs)(o.N_,{to:"/dashboard",className:"d-flex gap-3 align-items-center listoficons",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"userpic userpic_main ofit rounded-circle ratio-unset overflow-hidden",children:(0,N.jsx)(m.A,{stroke:1,className:"w-100 h-100 main_homei"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h4",{children:K("Home")})})]}),(0,N.jsxs)(o.N_,{to:"/allgroup",className:"d-flex gap-2 align-items-center filterlist active",onClick:()=>z(0),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:i,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:K("All_Groups")})})]}),(0,N.jsxs)(o.N_,{to:"/groups",className:"d-flex gap-2 align-items-center filterlist ",onClick:()=>z(1),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:d,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:K("Your_Groups")})})]}),(0,N.jsxs)("button",{type:"button",className:"d-flex gap-2 align-items-center filterlist "+(2===E?"active":""),onClick:()=>z(2),children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:u,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:K("Discover_new")})})]}),(0,N.jsxs)("button",{type:"button",className:"d-flex gap-2 align-items-center filterlist "+(3===E?"active":""),onClick:()=>{W(),Z(!0)},children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"eventicon fulw",children:(0,N.jsx)("img",{src:u,alt:"eventicon"})})}),(0,N.jsx)("div",{className:"flex-grow-1",children:(0,N.jsx)("h3",{children:K("GuestUser")})})]}),(0,N.jsx)("div",{className:"newebentbtn d-block",children:(0,N.jsx)("button",{type:"button",onClick:()=>{F(!0),document.body.style.overflowY="hidden"},children:K("Create_new_group")})}),(0,N.jsx)("hr",{className:"linehr"}),(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 categorieslist",children:[(0,N.jsx)("h6",{children:K("Most_popular_group")}),(0,N.jsx)("div",{className:"d-flex flex-column gap-2 groupmy grouplistleft scroll_bar",children:0===R.length?(0,N.jsx)("h6",{children:K("LeftMenu_Nogroupfounds")}):R.map(((e,s)=>(0,N.jsxs)(o.N_,{to:`/group/${e.slug}`,className:"d-flex gap-3 align-items-center listoficons",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsxs)("div",{className:"userpic ofit rounded-3 overflow-hidden",children:[(0,N.jsx)("img",{src:e.image,alt:e.name})," "]})}),(0,N.jsxs)("div",{className:"flex-grow-1",children:[(0,N.jsx)("h4",{children:e.name})," ",(0,N.jsx)("p",{children:e.description})," "]})]},s)))})]})]})]})}),(0,N.jsx)("div",{className:"col-md-9",children:(0,N.jsxs)("div",{className:"row gy-4",children:[(0,N.jsx)("div",{className:"col-12",children:(0,N.jsx)("div",{className:"d-flex justify-content-md-end",children:(0,N.jsxs)("select",{className:"form-control sortfilter",onChange:e=>(async e=>{var s=e.target.value;const a=localStorage.getItem("userLogin"),t=a?JSON.parse(a):null,r=[...k,t.id];if("Most_popular"===s||"Member_count"===s){let e={search_by:s,user_id:r};try{const s=await j.A.post(J+"getAllgroupMostpopular",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});w(s.data.results)}catch(o){o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("Request data:",o.request):console.error("Error message:",o.message)}}else{let e={search_by:s,user_id:r};try{const s=await j.A.post(J+"getAllgroupFilter",e,{headers:{Accept:"application/json","Content-Type":"application/json"}});w(s.data.results)}catch(o){o.response?(console.error("Response data:",o.response.data),console.error("Response status:",o.response.status)):o.request?console.error("Request data:",o.request):console.error("Error message:",o.message)}}})(e),children:[(0,N.jsx)("option",{value:"",children:K("Sortby")}),(0,N.jsx)("option",{value:"Newest_first",children:K("NewestFirst")}),(0,N.jsx)("option",{value:"Most_popular",children:K("MostPopular")}),(0,N.jsx)("option",{value:"Member_count",children:K("MemberCount")}),(0,N.jsx)("option",{value:"Most_active",children:K("MostActive")}),(0,N.jsx)("option",{value:"Oldest_first",children:K("OldestFirst")}),(0,N.jsx)("option",{value:"Alphabetical",children:K("Alphabetical")})]})})}),0===_.length?(0,N.jsx)("div",{className:"col-12 text-center",children:(0,N.jsx)("h2",{children:K("LeftMenu_Nogroupfounds")})}):_.map(((e,s)=>{var a;return(0,N.jsx)("div",{className:"col-md-4",children:(0,N.jsxs)(o.N_,{to:`/group/${e.slug}`,className:"groupblck d-flex gap-2",children:[(0,N.jsx)("div",{className:"flex-grow-1 ps-3 py-2",children:(0,N.jsxs)("div",{className:"d-flex flex-column h-100 gap-1",children:[(0,N.jsx)("h2",{className:"breakline",children:e.name}),(0,N.jsx)("h3",{children:H(e.date)}),(0,N.jsx)("ul",{className:"avimgsgroup",children:(null===e||void 0===e||null===(a=e.invited_users)||void 0===a?void 0:a.length)>0&&e.invited_users.filter((e=>null!==e.user_id)).map(((e,s)=>(0,N.jsx)("li",{children:(0,N.jsx)(o.N_,{to:`/friend/${e.user_id}`,children:(0,N.jsx)("img",{className:"w-100 h-100",src:e.user_image,alt:"Profile"})})},s)))}),(0,N.jsxs)("h4",{children:[e.total_members," ",K("LeftMenu_Members")]})]})}),(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("div",{className:"grpic shimg",children:(0,N.jsx)(x.A,{url:e.image})})})]})},s)}))]})})]})})}),V&&(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"d-flex flex-column gap-3 scroll_bar guest_invitepop",children:[(0,N.jsx)("h4",{children:K("Guest")}),(0,N.jsx)("button",{onClick:()=>{Z(!1)},className:"guestClose",children:(0,N.jsx)(p.qpF,{})}),(0,N.jsx)(l.A,{id:"controlled-tab-example",activeKey:e,onSelect:e=>s(e),className:"mb-3 flex gap-3",children:(0,N.jsx)(n.A,{eventKey:"Invite",title:`Invite (${L.length||0})`,children:(0,N.jsx)("div",{className:"d-flex flex-column gap-4",children:(0,N.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,N.jsxs)("h5",{children:[K("Friends")," (",L.length,")"]}),(0,N.jsx)("ul",{className:"scroll_bar invite_people",children:0===L.length?(0,N.jsx)("li",{className:"d-flex flex-column gap-2",children:(0,N.jsx)("div",{className:"d-flex justify-content-between gap-3 align-items-center",children:K("No_result_found")})}):L.map(((e,s)=>(0,N.jsx)("li",{className:"d-flex flex-column gap-2",children:(0,N.jsxs)("div",{className:"d-flex justify-content-between gap-3 align-items-center",children:[(0,N.jsxs)("div",{className:"d-flex align-items-center gap-3 pt-2",children:[(0,N.jsx)("div",{className:"d-block main_profile",children:(0,N.jsx)("img",{src:e.creator_profile_image,alt:"image"})}),(0,N.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,N.jsx)("h6",{children:e.creator_username})})]}),(0,N.jsxs)(o.N_,{to:`/receivedchatmessage/${e.creator_slug}`,className:"send_messsage",children:[(0,N.jsx)(c.dnO,{}),(0,N.jsxs)("p",{children:[" ",K("Message")]})]})]})})))})]})})})})]})}),(0,N.jsx)(h.I,{isOpen:O,onClose:()=>{F(!1),document.body.style.overflowY="auto"},LoginData:A})]})}},3625:(e,s,a)=>{e.exports=a.p+"static/media/ev1.c139f534f6b2d0f4efe4.png"},5442:(e,s,a)=>{e.exports=a.p+"static/media/ev2.dbb5ba26d46537e3b09e.png"},6571:(e,s,a)=>{e.exports=a.p+"static/media/ev3.f6a69b811c047b8c1d3e.png"}}]);
//# sourceMappingURL=4771.15211d2b.chunk.js.map