"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[8071],{8071:(e,s,a)=>{a.r(s),a.d(s,{default:()=>S});var l=a(5043),t=a(5475),o=a(5700),r=a(6990),n=a(6999),c=a(6982),i=a(3625),d=a(5442),u=a(6213),m=a(4117),h=a(2862),p=a(2425),g=a(2074),x=a(5200),j=a(686),v=a(7089),y=a(4282),f=a(793),N=a(1075),b=a(579);function S(){const[e,s]=(0,l.useState)("");var S="https://backend.amourette.no/api/members/";const[w,k]=(0,l.useState)(!1),[_,C]=(0,l.useState)(0),[A,q]=(0,l.useState)(""),[E,R]=(0,l.useState)(""),[I,O]=(0,l.useState)(""),[D,L]=(0,l.useState)([]),[F,G]=(0,l.useState)([]),[M,T]=(0,l.useState)(""),[J,Y]=(0,l.useState)(""),[W,U]=(0,l.useState)(""),[B,H]=(0,l.useState)(""),[P,Q]=(0,l.useState)(""),[$,z]=(0,l.useState)([]),[K,V]=(0,l.useState)(""),[X,Z]=(0,l.useState)(""),[ee,se]=(0,l.useState)(!1),[ae,le]=(0,l.useState)(""),[te,oe]=(0,l.useState)(!1),[re,ne]=(0,l.useState)(""),[ce,ie]=(0,l.useState)(""),[de,ue]=(0,l.useState)(!1),[me,he]=(0,l.useState)([]),pe=e=>{C(e)},[ge,xe]=(0,l.useState)(!1),[je,ve]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;R(s)}),[]),(0,l.useEffect)((()=>{void 0!==E&&fe()}),[E]),(0,l.useEffect)((()=>{ye()}),[M]);const ye=async()=>{console.log(M);const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id,search:M.toLowerCase()};console.log(s);try{var a=(await u.A.post(S+"galleryfilter",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(a),L(a)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}};(0,l.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);console.log(s.event);const a=localStorage.getItem("userLogin");a&&JSON.parse(a);"Deletegallery"===s.event&&fe()}catch(s){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[]);const fe=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{var a=(await u.A.post(S+"getgallery",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(a),L(a)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}},Ne=async e=>{O(e),(async e=>{let s={id:e,user_id:E.id};try{var a=(await u.A.post(S+"getGalleryComments",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;G(a)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}})(e),(async e=>{const s=localStorage.getItem("userLogin");let a={id:e,user_id:(s?JSON.parse(s):null).id};try{const e=await u.A.post(S+"getGalleryDetailnextpreviousspecificuser",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&H(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&Q(e.data.previous_gallery_id)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}})(e);let s={id:e,user_id:E.id};try{const e=await u.A.post(S+"getGalleryDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var a=e.data.row[0];ve(!0),document.body.style.overflowY="hidden",Y(a)}}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}};(0,l.useEffect)((()=>{(async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let a={search:$,user_id:s.id};try{const e=(await u.A.post(S+"getallgallerySearchfilter",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log("kl"),console.log(e),L(e)}catch(l){l.response?console.error("Response error:",l.response):l.request?console.error("Request error:",l.request):console.error("Error message:",l.message)}})()}),[$]);const be=async e=>{const s=e.target.value;e.target.checked?z((e=>[...e,s])):z((e=>e.filter((e=>e!==s))))},{t:Se}=(0,m.Bd)();(0,l.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),h.A.language!==e&&h.A.changeLanguage(e)}),[h.A,Se]);const we=e=>{const s=new Date(e),a=new Date;let l=a.getFullYear()-s.getFullYear();const t=a.getMonth()-s.getMonth();return(t<0||0===t&&a.getDate()<s.getDate())&&l--,l},[ke,_e]=(0,l.useState)(!1),Ce=()=>{_e(!1)},Ae=()=>{oe(!1)};(0,l.useEffect)((()=>{qe()}),[]);const qe=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:JSON.parse(e).id};try{const e=await u.A.post(S+"getGalleryallAlbum",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});he(e.data.results)}catch(a){a.response?console.error("Server Response Error:",a.response.data):a.request?console.error("No Response Received:",a.request):console.error("Request Error:",a.message)}},Ee=me.filter((e=>"Private_visible"!==e.visibility)),[Re,Ie]=(0,l.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.A,{refreshNotifications:w}),de&&(0,b.jsx)(f.A,{message:ce}),(0,b.jsx)("section",{className:"d-block searchmain gapy",children:(0,b.jsx)("div",{className:"container-lg",children:(0,b.jsxs)("div",{className:"row gy-4",children:[(0,b.jsx)("div",{className:"col-md-3 sticky-md-top h-100  evleft",children:(0,b.jsxs)("div",{className:"d-flex flex-column gap-3 searchleftfilter scroll_bar pe-2 ",children:[(0,b.jsx)("h1",{children:Se("Gallery")}),(0,b.jsx)("div",{className:"filtersearch",children:(0,b.jsx)("form",{action:"",children:(0,b.jsx)("input",{type:"text",value:W,onInput:e=>(async e=>{U(e);let s={search:e,user_id:E.id};try{var a=(await u.A.post(S+"getgallerySearch",s,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(a),L(a)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}})(e.target.value),placeholder:Se("Search_gallery")})})}),(0,b.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,b.jsxs)(t.N_,{to:"/dashboard",className:"d-flex gap-3 align-items-center listoficons",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"userpic userpic_main ofit rounded-circle ratio-unset overflow-hidden",children:(0,b.jsx)(p.A,{stroke:1,className:"w-100 h-100 main_homei"})})}),(0,b.jsx)("div",{className:"flex-grow-1",children:(0,b.jsx)("h4",{children:Se("Home")})})]}),(0,b.jsxs)(t.N_,{to:"/allgallery",className:"d-flex gap-2 align-items-center filterlist ",onClick:()=>pe(0),children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"eventicon fulw",children:(0,b.jsx)("img",{src:i,alt:"eventicon"})})}),(0,b.jsx)("div",{className:"flex-grow-1",children:(0,b.jsx)("h3",{children:Se("All_images")})})]}),(0,b.jsxs)(t.N_,{to:"/gallery",className:"d-flex gap-2 align-items-center filterlist active",onClick:()=>pe(1),children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"eventicon fulw",children:(0,b.jsx)("img",{src:d,alt:"eventicon"})})}),(0,b.jsx)("div",{className:"flex-grow-1",children:(0,b.jsx)("h3",{children:Se("Your_images")})})]}),(0,b.jsx)("div",{className:"newebentbtn d-block",children:(0,b.jsx)("button",{type:"button",onClick:()=>{xe(!0),document.body.style.overflowY="hidden"},children:Se("Upload_new_images")})}),(0,b.jsx)("hr",{className:"linehr"}),(0,b.jsxs)("div",{className:"d-flex flex-column gap-3 categorieslist",children:[(0,b.jsxs)("h6",{children:[" ",Se("Filters")]}),(0,b.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,b.jsxs)("div",{className:"listbox d-flex flex-column gap-3",children:[(0,b.jsxs)("label",{className:"cbox",children:[Se("Men"),(0,b.jsx)("input",{type:"checkbox",name:"labels",value:"Male",checked:$.includes("Male"),onChange:be}),(0,b.jsx)("span",{className:"checkmark"})]}),(0,b.jsxs)("label",{className:"cbox",children:[Se("Women"),(0,b.jsx)("input",{type:"checkbox",name:"labels",value:"Female",checked:$.includes("Female"),onChange:be}),(0,b.jsx)("span",{className:"checkmark"})]}),(0,b.jsxs)("label",{className:"cbox",children:[Se("Couples"),(0,b.jsx)("input",{type:"checkbox",name:"labels",value:"Couple",checked:$.includes("Couple"),onChange:be}),(0,b.jsx)("span",{className:"checkmark"})]})]})})]})]})]})}),(0,b.jsx)("div",{className:"col-md-9",children:(0,b.jsxs)("div",{className:"row gy-4",children:[(0,b.jsx)("div",{className:"col-md-4",children:(0,b.jsxs)("div",{className:"uploadfile rel smallload mobb h-100  ",title:"Create Album",onClick:()=>{Ie(!0)},children:[(0,b.jsx)("div",{className:"upload_image"}),(0,b.jsx)("div",{className:"inload h-100",title:"Create Album",children:(0,b.jsx)(x.GGD,{})})]})}),0===D.length?(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("h2",{children:Se("No_gallery_found")})}):D.map(((e,s)=>(0,b.jsx)("div",{className:"col-sm-6 col-xl-4",children:(0,b.jsxs)("div",{className:"position-relative search_content",children:[(0,b.jsx)("div",{className:"d-block searchimg h-100",onClick:()=>Ne(e.id),children:e.image&&"string"===typeof e.image?(0,b.jsx)(g.A,{className:"w-100 h-100 object-fit-cover",url:e.image}):(0,b.jsx)("p",{children:Se("No_avalibale_media")})}),(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2 searchgender_main",children:[(0,b.jsx)("div",{className:"d-block searchwomen flex-shrink-0",children:"Couple"===e.gender?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"d-flex searchwomen justify-content-between",children:[(0,b.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}),(0,b.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"})]})}):"Male"===e.gender?(0,b.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}):"Female"===e.gender?(0,b.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"}):null}),(0,b.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,b.jsx)("button",{type:"button",className:"btnoption",onClick:()=>(e=>{_e(e)})(s),children:(0,b.jsx)(j.aQx,{})}),ke===s&&(0,b.jsxs)("ul",{className:"popup-menu",children:[(0,b.jsx)("li",{onClick:()=>((e,s)=>{V(e),ne(s),oe(!0)})(e.id,e.image),children:Se("MOve_to")}),(0,b.jsx)("li",{onClick:Ce,children:Se("Cancel")})]})]})]}),(0,b.jsx)("div",{className:"d-flex align-items-start gap-3 justify-content-between px-3 searchusere",children:(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-between w-100 gap-2",children:[(0,b.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,b.jsx)("h4",{children:e.username})," ",(0,b.jsx)("p",{children:null!=e.birthday_date?`${we(e.birthday_date)},`:""})]}),(0,b.jsx)("div",{className:"d-flex flex-column gap-2",children:null!==e.location&&(0,b.jsx)("p",{children:e.location})})]})})]})},s)))]})})]})})}),(0,b.jsx)(c.E,{isOpen1:je,onClose1:()=>{ve(!1),document.body.style.overflowY="auto"},seperateGallerydetail:J,UserDetail:A,LoginData:E,getUserfav:async()=>{Ne(I)},GalleryCommets:F,getCommentPost:async()=>{Ne(I)},GalleryIdDetailGet:I,previousId:B,nextId:P,getgallerydetialnext:()=>{Ne(P)},getgallerydetialprev:()=>{Ne(B)}}),(0,b.jsx)(n.j,{isOpen:ge,onClose:()=>{xe(!1),document.body.style.overflowY="auto"},LoginData:E,notification:async()=>{k((e=>!e))},visibleAlbums:Ee}),(0,b.jsx)(N.x,{isOpen:Re,onClose:()=>{Ie(!1),document.body.style.overflowY="auto"},LoginData:E,closepopup11:async()=>{Ie(!1),document.body.style.overflowY="auto"}}),(0,b.jsx)(r.w,{}),(0,b.jsxs)(v.A,{show:te,className:"edit_admin",onHide:Ae,children:[(0,b.jsx)(v.A.Header,{closeButton:!0,children:(0,b.jsxs)(v.A.Title,{className:"textcolor",children:[" ",Se("Upload")]})}),(0,b.jsx)(v.A.Body,{children:(0,b.jsxs)("form",{onSubmit:async()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;let a={file:re,id:ae,user_id:s.id,galleryIdd:K};try{const e=await u.A.post(S+"gallerymovetoAlbum",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});ue(!0),ie(e.data.message),setTimeout((()=>{ue(!1),oe(!1)}),1e3)}catch(l){l.response?console.error("Server Response Error:",l.response.data):l.request?console.error("No Response Received:",l.request):console.error("Request Error:",l.message)}},method:"post",action:"javascript:void(0)",children:[(0,b.jsxs)("div",{className:"row g-3",children:[" ",(0,b.jsxs)("div",{className:"col-md-12",children:[(0,b.jsxs)("label",{className:"stextlabel text-dark",children:[Se("MOve_to")," *"]}),(0,b.jsxs)("select",{required:!0,className:"form-control",onChange:e=>{le(e.target.value)},name:"move_to",children:[(0,b.jsx)("option",{value:"",children:"--Select--"}),Ee.map(((e,s)=>(0,b.jsx)("option",{value:e.id,children:e.name},s)))]})]})]}),(0,b.jsx)("span",{className:"text-success",children:X}),ee&&(0,b.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,b.jsxs)("span",{className:"visually-hidden",children:[Se("loading"),"..."]})}),(0,b.jsxs)(v.A.Footer,{children:[(0,b.jsx)(y.A,{variant:"secondary",onClick:Ae,children:Se("Close")}),(0,b.jsx)(y.A,{type:"submit",style:{background:"#6e75a8"},className:"",children:Se("Move")})]})]})})]})]})}}}]);
//# sourceMappingURL=8071.a0cb67d9.chunk.js.map