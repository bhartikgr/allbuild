"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[9760],{9760:(e,s,a)=>{a.r(s),a.d(s,{default:()=>S});var l=a(5043),t=a(5475),o=a(5700),r=a(6990),n=a(6999),c=a(6982),i=a(3625),d=a(5442),u=a(6213),m=a(4117),p=a(2862),h=a(2425),g=a(2074),x=a(5200),j=a(686),v=a(7089),y=a(4282),f=a(793),N=a(1075),b=a(579);function S(){var e="https://backend.amourette.no/api/members/";const[s,S]=(0,l.useState)(""),[w,k]=(0,l.useState)(""),[_,A]=(0,l.useState)(!1),[C,q]=(0,l.useState)(""),[E,R]=(0,l.useState)([]),[D,I]=(0,l.useState)(0),[O,L]=(0,l.useState)(""),[M,T]=(0,l.useState)([]),[F,G]=(0,l.useState)(""),[J,Y]=(0,l.useState)(""),[U,W]=(0,l.useState)(""),[B,H]=(0,l.useState)([]),[P,Q]=(0,l.useState)([]),[$,z]=(0,l.useState)(""),[K,V]=(0,l.useState)([]),[X,Z]=(0,l.useState)(""),[ee,se]=(0,l.useState)(""),[ae,le]=(0,l.useState)(""),[te,oe]=(0,l.useState)(!1),[re,ne]=(0,l.useState)(""),[ce,ie]=(0,l.useState)(!1),[de,ue]=(0,l.useState)(""),[me,pe]=(0,l.useState)(""),[he,ge]=(0,l.useState)(!1),xe=e=>{I(e)},[je,ve]=(0,l.useState)(!1),[ye,fe]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;L(s)}),[]),(0,l.useEffect)((()=>{const e=new WebSocket("wss://backend.amourette.no");return e.onmessage=e=>{try{const s=JSON.parse(e.data);console.log(s.event);const a=localStorage.getItem("userLogin");a&&JSON.parse(a);"Deletegallery"===s.event&&be(E)}catch(s){}},e.onopen=()=>{console.log("WebSocket connection established")},e.onerror=e=>{console.error("WebSocket error:",e)},()=>{e.close(),console.log("WebSocket connection closed")}}),[]),(0,l.useEffect)((()=>{void 0!==O&&Ne()}),[O,J]);const Ne=async()=>{const s=localStorage.getItem("userLogin");let a={user_id:(s?JSON.parse(s):null).id};try{const s=(await u.A.post(e+"getAllfriends",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results.map((e=>e.id));R(s);await be(s)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}},be=async s=>{const a=localStorage.getItem("userLogin");let l={user_ids:[...s,(a?JSON.parse(a):null).id].join(", ")};console.log(l);try{var t=(await u.A.post(e+"getAllgallery",l,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(t),Se(),T(t)}catch(o){o.response||(o.request?console.error("Request data:",o.request):console.error("Error message:",o.message))}},Se=async()=>{const s=localStorage.getItem("userLogin");let a={user_id:(s?JSON.parse(s):null).id};try{const s=await u.A.post(e+"getUserDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.data.row.length>0){var l=s.data.row[0];G(l)}}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},we=async s=>{Y(s),_e(s),ke(s);let a={id:s,user_id:O.id};try{const s=await u.A.post(e+"getGalleryDetail",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(s.data.row.length>0){var l=s.data.row[0];fe(!0),document.body.style.overflowY="hidden",W(l)}}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},ke=async s=>{let a={id:s,user_id:O.id};try{const s=await u.A.post(e+"getGalleryDetailnextprevious",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==s.data.next_gallery_id&&Z(s.data.next_gallery_id),null!==s.data.previous_gallery_id&&z(s.data.previous_gallery_id)}catch(l){l.response||(l.request?console.error("Request data:",l.request):console.error("Error message:",l.message))}},_e=async s=>{let a={id:s,user_id:O.id};try{var l=(await u.A.post(e+"getGalleryComments",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;H(l)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}};(0,l.useEffect)((()=>{(async()=>{const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null,l=[...E,a.id];l.join(", ");let t={search:P,user_ids:l};console.log(t);try{var o=(await u.A.post(e+"searchfilter",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(o),Se(),T(o)}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}})()}),[P]);const Ae=async e=>{const s=e.target.value;e.target.checked?Q((e=>[...e,s])):Q((e=>e.filter((e=>e!==s))))},{t:Ce}=(0,m.Bd)();(0,l.useEffect)((()=>{const e=localStorage.getItem("language")||"en";console.log("language"),console.log(e),p.A.language!==e&&p.A.changeLanguage(e),console.log(Ce("LeftMenu_yourprofile"))}),[p.A,Ce]);const qe=e=>{const s=new Date(e),a=new Date;let l=a.getFullYear()-s.getFullYear();const t=a.getMonth()-s.getMonth();return(t<0||0===t&&a.getDate()<s.getDate())&&l--,l},[Ee,Re]=(0,l.useState)(!1),De=()=>{Re(!1)},Ie=()=>{ie(!1)};(0,l.useEffect)((()=>{Oe()}),[]);const Oe=async()=>{const s=localStorage.getItem("userLogin");let a={user_id:JSON.parse(s).id};try{const s=await u.A.post(e+"getGalleryallAlbum",a,{headers:{Accept:"application/json","Content-Type":"application/json"}});V(s.data.results)}catch(l){l.response?console.error("Server Response Error:",l.response.data):l.request?console.error("No Response Received:",l.request):console.error("Request Error:",l.message)}},Le=K.filter((e=>"Private_visible"!==e.visibility)),[Me,Te]=(0,l.useState)(!1);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.A,{refreshNotifications:_}),he&&(0,b.jsx)(f.A,{message:me}),(0,b.jsx)("section",{className:"d-block searchmain gapy",children:(0,b.jsx)("div",{className:"container-lg",children:(0,b.jsxs)("div",{className:"row gy-4",children:[(0,b.jsx)("div",{className:"col-md-3 sticky-md-top h-100  evleft",children:(0,b.jsxs)("div",{className:"d-flex flex-column gap-3 searchleftfilter scroll_bar pe-2 ",children:[(0,b.jsx)("h1",{children:Ce("Gallery")}),(0,b.jsx)("div",{className:"filtersearch",children:(0,b.jsx)("form",{action:"",children:(0,b.jsx)("input",{type:"text",value:w,onInput:s=>(async s=>{k(s);let a={search:s,user_ids:[...E,O.id].join(", ")};try{var l=(await u.A.post(e+"getAllgallerySearch",a,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;console.log(l),Se(),T(l)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}})(s.target.value),placeholder:Ce("Search_gallery")})})}),(0,b.jsxs)("div",{className:"d-flex flex-column gap-2",children:[(0,b.jsxs)(t.N_,{to:"/dashboard",className:"d-flex gap-3 align-items-center listoficons",children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"userpic userpic_main ofit rounded-circle ratio-unset overflow-hidden",children:(0,b.jsx)(h.A,{stroke:1,className:"w-100 h-100 main_homei"})})}),(0,b.jsx)("div",{className:"flex-grow-1",children:(0,b.jsx)("h4",{children:Ce("Home")})})]}),(0,b.jsxs)(t.N_,{to:"/allgallery",className:"d-flex gap-2 align-items-center filterlist "+(0===D?"active":""),onClick:()=>xe(0),children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"eventicon fulw",children:(0,b.jsx)("img",{src:i,alt:"eventicon"})})}),(0,b.jsx)("div",{className:"flex-grow-1",children:(0,b.jsx)("h3",{children:Ce("All_images")})})]}),(0,b.jsxs)(t.N_,{to:"/gallery",className:"d-flex gap-2 align-items-center filterlist "+(1===D?"active":""),onClick:()=>xe(1),children:[(0,b.jsx)("div",{className:"flex-shrink-0",children:(0,b.jsx)("div",{className:"eventicon fulw",children:(0,b.jsx)("img",{src:d,alt:"eventicon"})})}),(0,b.jsx)("div",{className:"flex-grow-1",children:(0,b.jsx)("h3",{children:Ce("Your_images")})})]}),(0,b.jsx)("div",{className:"newebentbtn d-block",children:(0,b.jsx)("button",{type:"button",onClick:()=>{ve(!0),document.body.style.overflowY="hidden"},children:Ce("Upload_new_images")})}),(0,b.jsx)("hr",{className:"linehr"}),(0,b.jsxs)("div",{className:"d-flex flex-column gap-3 categorieslist",children:[(0,b.jsx)("h6",{children:Ce("Filters")}),(0,b.jsx)("div",{className:"d-flex flex-column gap-2",children:(0,b.jsxs)("div",{className:"listbox d-flex flex-column gap-3",children:[(0,b.jsxs)("label",{className:"cbox",children:[Ce("Men"),(0,b.jsx)("input",{type:"checkbox",name:"labels",onClick:Ae,checked:P.includes("Male"),value:"Male"}),(0,b.jsx)("span",{className:"checkmark"})]}),(0,b.jsxs)("label",{className:"cbox",children:[Ce("Women"),(0,b.jsx)("input",{type:"checkbox",name:"labels",onClick:Ae,checked:P.includes("Female"),value:"Female"}),(0,b.jsx)("span",{className:"checkmark"})]}),(0,b.jsxs)("label",{className:"cbox",children:[Ce("Couples"),(0,b.jsx)("input",{type:"checkbox",checked:P.includes("Couple"),onClick:Ae,name:"labels",value:"Couple"}),(0,b.jsx)("span",{className:"checkmark"})]})]})})]})]})]})}),(0,b.jsx)("div",{className:"col-md-9",children:(0,b.jsxs)("div",{className:"row gy-4",children:[(0,b.jsx)("div",{className:"col-md-4",children:(0,b.jsxs)("div",{className:"uploadfile rel smallload mobb h-100  ",title:"Create Album",onClick:()=>{Te(!0)},children:[(0,b.jsx)("div",{className:"upload_image"}),(0,b.jsx)("div",{className:"inload h-100",title:"Create Album",children:(0,b.jsx)(x.GGD,{})})]})}),0===M.length?(0,b.jsx)("div",{className:"col-12 text-center",children:(0,b.jsx)("h2",{children:Ce("No_gallery_found")})}):M.map(((e,s)=>(0,b.jsx)("div",{className:"col-sm-6 col-xl-4",children:(0,b.jsxs)("div",{className:"position-relative search_content",children:[(0,b.jsx)("div",{className:"d-block searchimg h-100",onClick:()=>we(e.id),children:e.image&&"string"===typeof e.image?(0,b.jsx)(g.A,{className:"w-100 h-100 object-fit-cover",url:e.image}):(0,b.jsx)("p",{children:Ce("No_avalibale_media")})}),(0,b.jsxs)("div",{className:"d-flex align-items-center justify-content-between gap-2 searchgender_main",children:[(0,b.jsx)("div",{className:"d-block searchwomen flex-shrink-0",children:"Couple"===e.gender?(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("div",{className:"d-flex searchwomen justify-content-between",children:[(0,b.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}),(0,b.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"})]})}):"Male"===e.gender?(0,b.jsx)("img",{className:"w-100 h-100",src:a(1404),alt:"Male"}):"Female"===e.gender?(0,b.jsx)("img",{className:"w-100 h-100",src:a(7293),alt:"Female"}):null}),(0,b.jsxs)("div",{className:"flex-shrink-0 position-relative",children:[(0,b.jsx)("button",{type:"button",className:"btnoption",onClick:()=>(e=>{Re(e)})(s),children:(0,b.jsx)(j.aQx,{})}),Ee===s&&(0,b.jsxs)("ul",{className:"popup-menu",children:[(0,b.jsx)("li",{onClick:()=>((e,s)=>{se(e),ue(s),ie(!0)})(e.id,e.image),children:Ce("MOve_to")}),(0,b.jsx)("li",{onClick:De,children:Ce("Cancel")})]})]})]}),(0,b.jsx)("div",{className:"d-flex align-items-start gap-3 justify-content-between px-3 searchusere",children:(0,b.jsxs)("div",{className:"d-flex align-items-start justify-content-between w-100 gap-2",children:[(0,b.jsxs)("div",{className:"d-flex flex-column gap-1",children:[(0,b.jsx)("h4",{children:e.username})," ",(0,b.jsx)("p",{children:null!=e.birthday_date?`${qe(e.birthday_date)},`:""})]}),(0,b.jsx)("div",{className:"d-flex flex-column gap-2",children:null!==e.location&&(0,b.jsx)("p",{children:e.location})})]})})]})},s)))]})})]})})}),(0,b.jsx)(c.E,{isOpen1:ye,onClose1:()=>{fe(!1),document.body.style.overflowY="auto"},seperateGallerydetail:U,UserDetail:F,LoginData:O,getUserfav:async()=>{we(J)},GalleryCommets:B,getCommentPost:async()=>{we(J)},GalleryIdDetailGet:J,previousId:X,nextId:$,getgallerydetialnext:()=>{we($)},getgallerydetialprev:()=>{we(X)}}),(0,b.jsx)(n.j,{isOpen:je,onClose:()=>{ve(!1),document.body.style.overflowY="auto"},LoginData:O,notification:async()=>{A((e=>!e))},visibleAlbums:Le}),(0,b.jsx)(N.x,{isOpen:Me,onClose:()=>{Te(!1),document.body.style.overflowY="auto"},LoginData:O,closepopup11:async()=>{Te(!1),document.body.style.overflowY="auto"}}),(0,b.jsx)(r.w,{}),(0,b.jsxs)(v.A,{show:ce,className:"edit_admin",onHide:Ie,children:[(0,b.jsx)(v.A.Header,{closeButton:!0,children:(0,b.jsxs)(v.A.Title,{className:"textcolor",children:[" ",Ce("Upload")]})}),(0,b.jsx)(v.A.Body,{children:(0,b.jsxs)("form",{onSubmit:async()=>{const s=localStorage.getItem("userLogin"),a=s?JSON.parse(s):null;let l={file:de,id:re,user_id:a.id,galleryIdd:ee};try{const s=await u.A.post(e+"gallerymovetoAlbum",l,{headers:{Accept:"application/json","Content-Type":"application/json"}});ge(!0),pe(s.data.message),setTimeout((()=>{ge(!1),ie(!1)}),1e3)}catch(t){t.response?console.error("Server Response Error:",t.response.data):t.request?console.error("No Response Received:",t.request):console.error("Request Error:",t.message)}},method:"post",action:"javascript:void(0)",children:[(0,b.jsxs)("div",{className:"row g-3",children:[" ",(0,b.jsxs)("div",{className:"col-md-12",children:[(0,b.jsxs)("label",{className:"stextlabel text-dark",children:[Ce("MOve_to")," *"]}),(0,b.jsxs)("select",{required:!0,className:"form-control",onChange:e=>{ne(e.target.value)},name:"move_to",children:[(0,b.jsx)("option",{value:"",children:"--Select--"}),Le.map(((e,s)=>(0,b.jsx)("option",{value:e.id,children:e.name},s)))]})]})]}),(0,b.jsx)("span",{className:"text-success",children:ae}),te&&(0,b.jsx)("div",{className:"spinner-border text-success send_load",role:"status",children:(0,b.jsxs)("span",{className:"visually-hidden",children:[Ce("loading"),"..."]})}),(0,b.jsxs)(v.A.Footer,{children:[(0,b.jsx)(y.A,{variant:"secondary",onClick:Ie,children:Ce("Close")}),(0,b.jsx)(y.A,{type:"submit",style:{background:"#6e75a8"},className:"",children:Ce("Move")})]})]})})]})]})}}}]);
//# sourceMappingURL=9760.c7e0ba33.chunk.js.map