"use strict";(self.webpackChunkamourette=self.webpackChunkamourette||[]).push([[2046],{9665:(e,s,t)=>{t.r(s),t.d(s,{default:()=>m});var r=t(5043),a=t(5475),l=t(5700),n=t(4117),o=t(2862),i=t(6213),c=t(9853),d=t.n(c),u=t(2074),p=t(4295),g=t(579);const m=function(){var e="https://backend.amourette.no/api/members/";const[s,c]=(0,r.useState)([]),[m,h]=(0,r.useState)([]),[x,f]=(0,r.useState)([]),[j,v]=(0,r.useState)([]),[N,y]=(0,r.useState)([]),[_,w]=(0,r.useState)(!1),[A,S]=(0,r.useState)(null);(0,r.useEffect)((()=>{console.log("Running useEffect: getAllfriendss");(async()=>{if(_)return;w(!0),S(null);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(null===t||void 0===t||!t.id)return console.error("User ID not found"),S("User not logged in"),void w(!1);let r={user_id:t.id};console.log("FormData:",r);try{const s=await i.A.post(e+"getAllfriends",r,{headers:{Accept:"application/json","Content-Type":"application/json"}}),t=s.data.results.map((e=>e.id));h((e=>d()(e,t)?(console.log("No change in AllfriendId, skipping update"),e):(console.log("Updating AllfriendId:",t),t)))}catch(a){a.response?(console.error("Server responded with error:",a.response.data),S("Failed to fetch friends")):a.request?(console.error("No response received:",a.request),S("No response from server")):(console.error("Error setting up request:",a.message),S("An error occurred"))}finally{w(!1)}})()}),[]),(0,r.useEffect)((()=>{(async()=>{m.length>0&&(console.log("Fetching gallery for AllfriendId:",m),b())})()}),[m]);const b=async()=>{if(_)return;w(!0),S(null);const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;if(null===t||void 0===t||!t.id)return console.error("User ID not found"),w(!1),void S("User not logged in");let r={user_ids:[...m,t.id].join(", "),user_id:t.id};console.log("FormData:",r);try{const s=await i.A.post(e+"getlastestpost",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});console.log(s.data.results);const t=s.data.results;c(t)}catch(a){a.response?(console.error("Server responded with error:",a.response.data),S("Failed to fetch posts")):a.request?(console.error("No response received:",a.request),S("No response from server")):(console.error("Error setting up request:",a.message),S("An error occurred"))}finally{w(!1)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{I()}),2e3);return()=>clearInterval(e)}),[m]);const I=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;t.id;let r={user_id:t.id};try{var a=(await i.A.post(e+"getAllforumLatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data;f(a.results)}catch(l){console.error(l)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{k()}),2e3);return()=>clearInterval(e)}),[m]);const k=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;t.id;let r={user_id:t.id};try{const s=await i.A.post(e+"getAllgrouplatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});v(s.data.results)}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status)):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}};(0,r.useEffect)((()=>{const e=setInterval((()=>{q()}),1500);return()=>clearInterval(e)}),[m]);const q=async()=>{const s=localStorage.getItem("userLogin"),t=s?JSON.parse(s):null;let r={user_ids:[...m,t.id],user_id:t.id,search:""};try{const s=await i.A.post(e+"getAlleventsLatest",r,{headers:{Accept:"application/json","Content-Type":"application/json"}});y(s.data.results)}catch(a){a.response?(console.error("Response data:",a.response.data),console.error("Response status:",a.response.status)):a.request?console.error("Request data:",a.request):console.error("Error message:",a.message)}},E=e=>{if(!e)return null;const s=new Date(e),t=new Date,r=s.getTime(),a=t.getTime()-r,l=Math.floor(a/100),n=Math.floor(l/60),o=Math.floor(n/60),i=Math.floor(o/24),c=Math.floor(i/7),d=Math.floor(i/30),u=(Math.floor(i/365),s.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",timeZone:"Europe/Oslo"})),p=s.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric",timeZone:"Europe/Oslo"}),g=t.getFullYear(),m=s.getFullYear();return l<60?"Just now":n<60?`${n}m`:o<24?`${o}h ${u}`:1===i?`Yesterday ${u}`:i<7?`${i}d ${u}`:c<4?`${c}w ${u}`:d<12?`${d}m ${u}`:m===g?`${u}`:p},L=e=>{if(!e)return null;const s=new Date(e),t={timeZone:"Europe/Oslo"};return`${s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",...t}).replace(/\//g,"-")} ${s.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0,...t})}`},{t:$}=(0,n.Bd)();(0,r.useEffect)((()=>{const e=localStorage.getItem("language")||"en";o.A.language!==e&&o.A.changeLanguage(e)}),[o.A,$]);const[C,D]=(0,r.useState)(!1),[T,G]=(0,r.useState)(""),[O,R]=(0,r.useState)(""),[U,F]=(0,r.useState)([]),[M,J]=(0,r.useState)(""),[Y,B]=(0,r.useState)(""),[V,P]=(0,r.useState)(""),[Z,z]=(0,r.useState)("");var H="https://backend.amourette.no/api/members/";(0,r.useEffect)((()=>{const e=localStorage.getItem("userLogin"),s=e?JSON.parse(e):null;P(s),K()}),[]);const K=async()=>{const e=localStorage.getItem("userLogin");let s={user_id:(e?JSON.parse(e):null).id};try{const e=await i.A.post(H+"getUserDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];R(t)}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},Q=async e=>{J(e),X(e),W(e);let s={id:e,user_id:V.id};try{const e=await i.A.post(H+"getGalleryDetail",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});if(e.data.row.length>0){var t=e.data.row[0];D(!0),document.body.style.overflowY="hidden",G(t)}}catch(r){r.response||(r.request?console.error("Request data:",r.request):console.error("Error message:",r.message))}},W=async e=>{let s={id:e,user_id:V.id};try{const e=await i.A.post(H+"getGalleryDetailnextprevious",s,{headers:{Accept:"application/json","Content-Type":"application/json"}});null!==e.data.next_gallery_id&&z(e.data.next_gallery_id),null!==e.data.previous_gallery_id&&B(e.data.previous_gallery_id)}catch(t){t.response||(t.request?console.error("Request data:",t.request):console.error("Error message:",t.message))}},X=async s=>{let t={id:s,user_id:V.id};try{var r=(await i.A.post(e+"getGalleryComments",t,{headers:{Accept:"application/json","Content-Type":"application/json"}})).data.results;F(r)}catch(a){a.response||(a.request?console.error("Request data:",a.request):console.error("Error message:",a.message))}};return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{className:"news_main",children:[(0,g.jsx)(l.A,{}),(0,g.jsx)("section",{className:"latest d-block py-5",children:(0,g.jsx)("div",{className:"container-lg",children:(0,g.jsxs)("div",{className:"row gy-4",children:[(0,g.jsx)("div",{className:"col-12",children:(0,g.jsx)("h1",{children:$("Latestnew")})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsx)("h3",{className:" overflow-hidden  rounded-3",children:$("ACTIVITYLOG")}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  rounded-3 ",children:0===s.length?(0,g.jsx)("h2",{}):s.map(((e,s)=>{const r=E(e.date);return(0,g.jsxs)("div",{className:"postblock d-flex flex-column rounded-3 overflow-hidden",children:[(0,g.jsxs)("div",{className:"d-flex justify-content-between align-items-center  px-3 py-1",children:[(0,g.jsx)("div",{className:"flex-grow-1",children:(0,g.jsxs)("div",{className:"d-flex gap-2 align-items-center",children:[(0,g.jsx)("div",{className:"flex-shrink-0",children:(0,g.jsx)(a.N_,{to:`/friend/${e.user_id}`,target:"_blank",className:"d-flex gap-2 align-items-center",children:(0,g.jsx)("div",{class:"flex-shrink-0",children:(0,g.jsx)("div",{class:"urpic ofit rounded-circle overflow-hidden",children:1===e.makeImagePrivate?(0,g.jsx)("img",{className:"w-100 h-100",src:t(7123),alt:"userpic"}):(0,g.jsx)(u.A,{url:e.uimage})})})})}),(0,g.jsxs)("div",{className:"flex-grow-1",children:[(0,g.jsx)(a.N_,{to:`/friend/${e.user_id}`,target:"_blank",className:"d-flex gap-2 align-items-center",children:(0,g.jsx)("h4",{children:e.username})}),(0,g.jsx)("h5",{children:r})]})]})}),(0,g.jsx)("div",{className:"flex-shrink-0"})]}),(0,g.jsx)(a.N_,{onClick:()=>Q(e.id),to:"javascript:void(0)",className:"imgblock ofit rounded-3 overflow-hidden mt-2",children:(0,g.jsx)(u.A,{url:e.image,className:"w-100 h-100"})})]},s)}))})]})}),(0,g.jsx)("div",{className:"col-md-6",children:(0,g.jsxs)("div",{className:"d-flex flex-column gap-4",children:[(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3 overflow-hidden",children:[(0,g.jsx)("h3",{className:"",children:$("UpcomingEvent")}),(0,g.jsx)(a.N_,{to:"/allevents",className:"view_all   rounded-3",children:$("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===N.length?(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("h5",{children:$("No_result_found")})}):N.map(((e,s)=>(0,g.jsxs)(a.N_,{to:`/singleevent/${e.slug}`,className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:(0,g.jsx)(u.A,{url:e.image,className:"w-100 h-100 object-fit-cover"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:L(e.created_at)}),(0,g.jsxs)("h5",{children:[e.name," "]}),(0,g.jsx)("p",{children:(0,g.jsx)("span",{children:e.description})})]})]})))})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3  overflow-hidden",children:[(0,g.jsx)("h3",{children:$("ForumPosts")}),(0,g.jsx)(a.N_,{to:"/allforums",className:"view_all   rounded-3",children:$("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===x.length?(0,g.jsx)("h5",{children:$("No_result_found")}):x.map(((e,s)=>{E(e.date);return(0,g.jsxs)(a.N_,{to:`/singleforums/${e.slug}`,className:"d-flex align-items-start gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:e.image?(0,g.jsx)(u.A,{url:e.image}):(0,g.jsx)("img",{className:"w-100 h-100 object-fit-cover",src:t(7123),alt:"userpic"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:L(e.date)}),(0,g.jsx)("h5",{children:e.description})]})]})}))})]}),(0,g.jsxs)("div",{className:"d-flex flex-column gap-3",children:[(0,g.jsxs)("div",{className:"d-flex align-items-center justify-content-between main_sub  rounded-3  overflow-hidden",children:[(0,g.jsx)("h3",{children:$("RightMenu_Groups")}),(0,g.jsx)(a.N_,{to:"/allgroup",className:"view_all  rounded-3",children:$("ViewAll")})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 news_back  news_right_event scroll_bar  rounded-3",children:0===j.length?(0,g.jsx)("div",{className:"col-12 text-center",children:(0,g.jsx)("h5",{children:$("LeftMenu_Nogroupfounds")})}):j.map(((e,s)=>(0,g.jsxs)(a.N_,{to:`/group/${e.slug}`,className:"d-flex align-items-center gap-3",children:[(0,g.jsx)("div",{className:"d-block profile",children:(0,g.jsx)(u.A,{url:e.image,className:"w-100 h-100 object-fit-cover"})}),(0,g.jsxs)("div",{className:"d-flex flex-column align-items-start gap-0 ",children:[(0,g.jsx)("p",{children:L(e.created_at)}),(0,g.jsxs)("h5",{children:[e.name," "]}),(0,g.jsx)("p",{children:(0,g.jsx)("span",{children:e.description})})]})]})))})]})]})})]})})})]}),(0,g.jsx)(p.d,{isOpen1:C,onClose1:()=>{D(!1),document.body.style.overflowY="auto"},seperateGallerydetail:T,UserDetail:O,LoginData:V,getUserfav:async()=>{Q(M)},GalleryCommets:U,getCommentPost:async()=>{Q(M)},GalleryIdDetailGet:M,previousId:Z,nextId:Y,getgallerydetialnext:()=>{Q(Y)},getgallerydetialprev:()=>{Q(Z)}})]})}}}]);
//# sourceMappingURL=2046.714b12d6.chunk.js.map